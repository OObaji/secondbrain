<!DOCTYPE html>
<html lang="en" class="overflow-x-hidden">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kaizen OS - Second Brain</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        zinc: {
                            850: '#1f1f22',
                            950: '#09090b',
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        body { 
            -webkit-font-smoothing: antialiased; 
            touch-action: manipulation;
        }
        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #52525b; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #71717a; }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .animate-shake {
            animation: shake 0.2s ease-in-out 2;
        }
    </style>
</head>
<body class="bg-zinc-950 text-zinc-100 min-h-screen overflow-y-auto">
    <div id="root"></div>

    <!-- Application Logic -->
    <script type="module">
        import React, { useState, useEffect, useRef } from "https://esm.sh/react@18.2.0";
        import { createRoot } from "https://esm.sh/react-dom@18.2.0/client";
        import { 
            Layout, Home, BookOpen, Target, PenTool, Settings, Search, Bell, Plus, 
            MoreHorizontal, CheckCircle2, Clock, ArrowRight, Brain, Layers, 
            Calendar as CalendarIcon, ChevronRight, Sun, Moon, Filter, Zap, Coffee, 
            Video, MapPin, RefreshCw, MoreVertical, Lightbulb, Sparkles, Trash2, 
            Sprout, Briefcase, DollarSign, Move, Eraser, Palette, MousePointer2, 
            Trophy, Flag, TrendingUp, Award, Crosshair, Star, Bookmark, Book, 
            GraduationCap, Wallet, Building, Users, ExternalLink, Link as LinkIcon, 
            PlayCircle, Film, Music, Gamepad2, MonitorPlay, Headphones, Tv, 
            MessageSquare, AlertCircle, Folder, Minus, CalendarDays, LogOut, Lock, 
            Fingerprint, Delete, KeyRound, ShieldQuestion, RotateCcw, Menu, X, Save, Edit3, Wifi, WifiOff, Database
        } from "https://esm.sh/lucide-react@0.344.0?deps=react@18.2.0";

        // --- FIREBASE IMPORTS ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
        import { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, collection, doc, onSnapshot, addDoc, updateDoc, deleteDoc, query, orderBy, serverTimestamp, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // --- CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyCKGxtGBjHjHkOh902YgfU6h4-NBk065z0",
            authDomain: "secondbrain-8d8cd.firebaseapp.com",
            projectId: "secondbrain-8d8cd",
            storageBucket: "secondbrain-8d8cd.firebasestorage.app",
            messagingSenderId: "1913632272",
            appId: "1:1913632272:web:324f366a35e6dd07cffc95",
            measurementId: "G-V2BXKYRC5X"
        };
        
        const appId = 'kaizen-os-prod';
        
        // GLOBAL USER ID for Syncing across devices
        // This ensures all devices looking at this app see the same data
        const SHARED_USER_ID = 'global_shared_user'; 

        // Initialize Firebase safely
        let app, auth, db, analytics;
        let isFirebaseConfigured = false;
        
        try {
            if (firebaseConfig.apiKey && firebaseConfig.apiKey !== "YOUR_API_KEY_HERE") {
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
                analytics = getAnalytics(app);
                isFirebaseConfigured = true;
            } else {
                console.warn("Firebase not configured. Running in UI-only mode.");
            }
        } catch (e) {
            console.error("Firebase initialization failed:", e);
            isFirebaseConfigured = false;
        }

        // --- COMPONENTS ---

        const Card = ({ children, className = "", title, action }) => (
            React.createElement("div", { className: `bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-4 md:p-6 flex flex-col ${className}` },
                (title || action) && (
                    React.createElement("div", { className: "flex justify-between items-center mb-4" },
                        title && React.createElement("h3", { className: "text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider" }, title),
                        action
                    )
                ),
                children
            )
        );

        const NavItem = ({ icon: Icon, label, active, onClick }) => (
            React.createElement("button", { 
                onClick: onClick,
                className: `w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group ${active ? 'bg-zinc-900 text-white dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-200 dark:shadow-none' : 'text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800'}`
            },
                React.createElement(Icon, { size: 20, className: active ? '' : 'stroke-[2px]' }),
                React.createElement("span", { className: "font-medium" }, label),
                active && React.createElement(ChevronRight, { size: 16, className: "ml-auto opacity-50" })
            )
        );

        const QuickLinkButton = ({ href, icon: Icon, label, colorClass = "text-zinc-600 dark:text-zinc-300" }) => (
            React.createElement("a", { 
                href: href, 
                target: "_blank", 
                rel: "noopener noreferrer",
                className: "flex flex-col items-center justify-center gap-2 p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950/50 border border-zinc-100 dark:border-zinc-800 hover:border-indigo-500/50 hover:bg-white dark:hover:bg-zinc-900 hover:shadow-md transition-all group text-center h-full"
            },
                React.createElement("div", { className: `w-8 h-8 rounded-full flex items-center justify-center bg-white dark:bg-zinc-900 shadow-sm group-hover:scale-110 transition-transform ${colorClass}` },
                    React.createElement(Icon, { size: 16 })
                ),
                React.createElement("span", { className: "text-xs font-medium text-zinc-600 dark:text-zinc-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 line-clamp-1" }, label)
            )
        );

        const calculateDaysLeft = (targetDate) => {
            if (!targetDate) return null;
            const today = new Date();
            const target = new Date(targetDate);
            today.setHours(0,0,0,0);
            target.setHours(0,0,0,0);
            const diffTime = target - today;
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        };
        
        const Rocket = ({size}) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
                React.createElement("path", { d: "M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z" }),
                React.createElement("path", { d: "m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z" }),
                React.createElement("path", { d: "M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0" }),
                React.createElement("path", { d: "M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5" })
            )
        );

        const ProjectRow = ({ title, progress, color, deadline }) => {
            const daysLeft = calculateDaysLeft(deadline);
            const isUrgent = daysLeft !== null && daysLeft <= 3 && daysLeft >= 0;
            const isWarning = daysLeft !== null && daysLeft <= 7 && daysLeft > 3;
            const isOverdue = daysLeft !== null && daysLeft < 0;

            return (
                React.createElement("div", { className: `flex items-center gap-4 py-3 border-b border-zinc-100 dark:border-zinc-800 last:border-0 group cursor-pointer hover:bg-zinc-50 dark:hover:bg-zinc-800/30 px-3 -mx-3 rounded-xl transition-all ${isUrgent ? 'bg-red-50/50 dark:bg-red-900/10 border-l-2 border-l-red-500' : ''}` },
                    React.createElement("div", { className: `w-2 h-2 rounded-full flex-shrink-0 ${color} ${isUrgent ? 'animate-pulse shadow-[0_0_8px_currentColor]' : ''}` }),
                    React.createElement("div", { className: "flex-1 flex flex-col justify-center min-w-0" },
                        React.createElement("div", { className: "flex items-center gap-2" },
                            React.createElement("span", { className: `font-medium text-sm truncate ${isUrgent ? 'text-red-700 dark:text-red-200' : 'text-zinc-700 dark:text-zinc-200'}` }, title),
                            isUrgent && React.createElement("span", { className: "flex h-2 w-2 relative flex-shrink-0" },
                                React.createElement("span", { className: "animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75" }),
                                React.createElement("span", { className: "relative inline-flex rounded-full h-2 w-2 bg-red-500" })
                            )
                        ),
                        deadline && React.createElement("span", { className: `text-[10px] font-medium flex items-center gap-1.5 ${isOverdue ? "text-red-600 dark:text-red-400 font-bold" : isUrgent ? "text-red-500 dark:text-red-400 font-bold" : isWarning ? "text-orange-500 dark:text-orange-400" : "text-zinc-400"}` },
                            isOverdue 
                                ? React.createElement(React.Fragment, null, React.createElement(AlertCircle, { size: 10 }), ` Overdue by ${Math.abs(daysLeft)} days`)
                                : React.createElement(React.Fragment, null, React.createElement(Clock, { size: 10 }), daysLeft === 0 ? "Due Today" : daysLeft === 1 ? "Due Tomorrow" : `${daysLeft} days left`)
                        )
                    ),
                    React.createElement("div", { className: "flex flex-col items-end gap-1 min-w-[70px]" },
                        React.createElement("div", { className: "w-16 h-1.5 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden" },
                            React.createElement("div", { className: `h-full rounded-full ${color.replace('text-', 'bg-')}`, style: { width: `${progress}%`, backgroundColor: 'currentColor' } })
                        ),
                        React.createElement("span", { className: `text-[10px] font-mono ${isUrgent ? 'text-red-500 font-bold' : 'text-zinc-400'}` }, `${progress}%`)
                    )
                )
            );
        };

        // --- VIEW COMPONENTS (Dashboard, Projects, etc.) ---
        
        const DashboardView = ({ noteInput, setNoteInput, onSaveNote, recentThoughts, projects }) => {
             const activeProjects = projects.filter(p => p.status === 'Active').slice(0, 4);

             return React.createElement("div", { className: "animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "mb-6 md:mb-10" },
                    React.createElement("h2", { className: "text-2xl md:text-3xl font-bold mb-1" }, "Good Afternoon."),
                    React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-sm md:text-base" }, "Let's make today 1% better.")
                ),
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 auto-rows-min" },
                    // Quick Capture
                    React.createElement(Card, { className: "col-span-1 md:col-span-2 lg:col-span-3 row-span-1", title: "Quick Capture" },
                        React.createElement("div", { className: "relative" },
                            React.createElement("textarea", { 
                                value: noteInput,
                                onChange: (e) => setNoteInput(e.target.value),
                                placeholder: "What's on your mind? Capture it before it's gone...",
                                className: "w-full h-32 bg-zinc-50 dark:bg-zinc-950/50 border-0 rounded-xl p-4 resize-none focus:ring-2 focus:ring-indigo-500/20 focus:bg-white dark:focus:bg-zinc-900 transition-all placeholder:text-zinc-400 text-base md:text-sm"
                            }),
                            React.createElement("div", { className: "absolute bottom-3 right-3 flex gap-2" },
                                React.createElement("button", { className: "p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-400 transition-colors" }, React.createElement(Clock, { size: 16 })),
                                React.createElement("button", { onClick: () => onSaveNote(noteInput), className: "px-4 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors shadow-lg shadow-indigo-500/20" }, "Save Note")
                            )
                        )
                    ),
                    // Daily Kaizen
                    React.createElement(Card, { className: "col-span-1 md:col-span-1", title: "Daily Kaizen" },
                        React.createElement("div", { className: "flex flex-col h-full" },
                            React.createElement("p", { className: "text-sm text-zinc-500 mb-6" }, "Remember to focus on these pillars today."),
                            React.createElement("div", { className: "space-y-4" },
                                ["Prayer", "Reading", "Exercise", "Journalling"].map((item, i) => {
                                    const icons = [Sun, BookOpen, Zap, PenTool];
                                    const colors = ["orange", "blue", "rose", "purple"];
                                    return React.createElement("div", { key: item, className: "flex items-center gap-3 text-sm font-medium text-zinc-700 dark:text-zinc-200 group cursor-default" },
                                        React.createElement("div", { className: `flex items-center justify-center w-8 h-8 rounded-full bg-${colors[i]}-100 text-${colors[i]}-600 dark:bg-${colors[i]}-900/30 dark:text-${colors[i]}-400 group-hover:scale-110 transition-transform` },
                                            React.createElement(icons[i], { size: 16 })
                                        ),
                                        React.createElement("span", null, item)
                                    )
                                })
                            )
                        )
                    ),
                    // Quick Access
                    React.createElement(Card, { className: "col-span-1 md:col-span-4", title: "Quick Access" },
                         React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-8" },
                            React.createElement("div", { className: "lg:col-span-2" },
                                React.createElement("h4", { className: "text-xs font-semibold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2" }, React.createElement(Zap, { size: 14 }), " Operations"),
                                React.createElement("div", { className: "grid grid-cols-2 sm:grid-cols-4 gap-3" },
                                    React.createElement(QuickLinkButton, { href: "https://mtukso03.teleopticloud.com/Web/MyTime", icon: Clock, label: "Work Schedule", colorClass: "text-blue-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://www.airbnb.co.uk/hosting?tab=upcoming", icon: Home, label: "Airbnb Host", colorClass: "text-rose-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://thekaizenspace.netlify.app/", icon: TrendingUp, label: "Kaizen Tracker", colorClass: "text-emerald-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://www.notion.so/BUDGET-2026-2a1e1ae8ad3280479017feddb5c10840", icon: Wallet, label: "Budget 2026", colorClass: "text-amber-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://www.notion.so/CS-Year-3-LHU-115e1ae8ad3281e0987bc286a3374bed", icon: GraduationCap, label: "Uni Notes", colorClass: "text-indigo-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://www.notion.so/LIFE-GOALS-8a897b99c6a24eac89c1dade55f55761", icon: Target, label: "Yearly Goals", colorClass: "text-purple-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://www.notion.so/Journal-2dee1ae8ad32809da202e904f0055734", icon: Book, label: "Journal", colorClass: "text-zinc-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://calendar.google.com/calendar/u/0/r", icon: CalendarIcon, label: "Calendar", colorClass: "text-blue-400" })
                                )
                            ),
                            React.createElement("div", { className: "lg:col-span-1" },
                                React.createElement("h4", { className: "text-xs font-semibold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2" }, React.createElement(Briefcase, { size: 14 }), " Career & Job Hunt"),
                                React.createElement("div", { className: "grid grid-cols-2 gap-3" },
                                    React.createElement(QuickLinkButton, { href: "https://www.gradcracker.com/my-gradcracker", icon: Search, label: "Gradcracker", colorClass: "text-red-500" }),
                                    React.createElement(QuickLinkButton, { href: "https://salford.joinhandshake.co.uk/login", icon: Users, label: "Handshake", colorClass: "text-red-400" }),
                                    React.createElement(QuickLinkButton, { href: "https://www.brightnetwork.co.uk/login/?next=/dashboard/", icon: Lightbulb, label: "Bright Network", colorClass: "text-yellow-500" }),
                                    React.createElement("div", { className: "p-3 rounded-xl border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex items-center justify-center text-zinc-400 text-xs font-medium" }, "+ Add Link")
                                )
                            )
                        )
                    ),
                    // Active Projects
                    React.createElement(Card, { className: "col-span-1 md:col-span-2", title: "Active Projects", action: React.createElement("button", { className: "text-xs font-medium text-indigo-500 hover:text-indigo-400" }, "View All") },
                         React.createElement("div", { className: "space-y-1" },
                            activeProjects.map(p => React.createElement(ProjectRow, { key: p.id, title: p.title, progress: p.progress, color: p.color, deadline: p.deadline })),
                            activeProjects.length === 0 && React.createElement("div", { className: "text-center py-4 text-zinc-400 text-sm" }, "No active projects.")
                        )
                    ),
                    // Life Pillars
                    React.createElement(Card, { className: "col-span-1 md:col-span-2", title: "Life Pillars" },
                        React.createElement("div", { className: "grid grid-cols-2 gap-3 h-full" },
                            React.createElement("div", { className: "p-4 rounded-xl bg-zinc-50 dark:bg-zinc-950/50 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center gap-2 text-center group hover:border-indigo-500/50 transition-colors cursor-pointer" },
                                React.createElement("div", { className: "w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/20 text-orange-600 flex items-center justify-center mb-1" }, React.createElement(Sprout, { size: 20 })),
                                React.createElement("span", { className: "font-medium text-sm" }, "Personal Growth"),
                                React.createElement("span", { className: "text-xs text-zinc-400" }, "3 Active")
                            ),
                             React.createElement("div", { className: "p-4 rounded-xl bg-zinc-50 dark:bg-zinc-950/50 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center gap-2 text-center group hover:border-indigo-500/50 transition-colors cursor-pointer" },
                                React.createElement("div", { className: "w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/20 text-blue-600 flex items-center justify-center mb-1" }, React.createElement(Briefcase, { size: 20 })),
                                React.createElement("span", { className: "font-medium text-sm" }, "Education & Career"),
                                React.createElement("span", { className: "text-xs text-zinc-400" }, "12 Notes")
                            ),
                             React.createElement("div", { className: "p-4 rounded-xl bg-zinc-50 dark:bg-zinc-950/50 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center gap-2 text-center group hover:border-indigo-500/50 transition-colors cursor-pointer" },
                                React.createElement("div", { className: "w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 flex items-center justify-center mb-1" }, React.createElement(DollarSign, { size: 20 })),
                                React.createElement("span", { className: "font-medium text-sm" }, "Finance"),
                                React.createElement("span", { className: "text-xs text-zinc-400" }, "5 Drafts")
                            ),
                             React.createElement("div", { onClick: () => window.open('https://www.notion.so/Journal-2dee1ae8ad32809da202e904f0055734?source=copy_link', '_blank'), className: "p-4 rounded-xl bg-zinc-50 dark:bg-zinc-950/50 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center gap-2 text-center group hover:border-indigo-500/50 transition-colors cursor-pointer" },
                                React.createElement("div", { className: "w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/20 text-purple-600 flex items-center justify-center mb-1" }, React.createElement(Sun, { size: 20 })),
                                React.createElement("span", { className: "font-medium text-sm" }, "Spirituality"),
                                React.createElement("span", { className: "text-xs text-zinc-400" }, "Daily")
                            )
                        )
                    ),
                    React.createElement(Card, { className: "col-span-1 md:col-span-4", title: "Recent Thoughts" },
                        React.createElement("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" },
                            recentThoughts.length > 0 ? recentThoughts.map(thought => (
                                React.createElement("div", { key: thought.id, className: "group p-4 rounded-xl bg-zinc-50 dark:bg-zinc-950/30 border border-zinc-100 dark:border-zinc-800/50 hover:border-zinc-300 dark:hover:border-zinc-700 transition-all cursor-pointer" },
                                    React.createElement("div", { className: "flex justify-between items-start mb-2" },
                                        React.createElement("span", { className: "text-xs font-mono text-zinc-400" }, thought.date),
                                        React.createElement(MoreHorizontal, { size: 16, className: "text-zinc-400 opacity-0 group-hover:opacity-100 transition-opacity" })
                                    ),
                                    React.createElement("p", { className: "text-sm text-zinc-700 dark:text-zinc-300 line-clamp-2 leading-relaxed" }, thought.text),
                                    React.createElement("div", { className: "mt-3 flex gap-2" },
                                        React.createElement("span", { className: "text-[10px] uppercase tracking-wider font-semibold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 px-2 py-0.5 rounded" }, "Journal")
                                    )
                                )
                            )) : React.createElement("div", { className: "col-span-3 text-center py-8 text-zinc-400" }, "No recent thoughts captured.")
                        )
                    )
                )
             );
        };

        const ThoughtsView = ({ thoughts, onDeleteThought }) => (
            React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Thoughts", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(MessageSquare, { size: 12 }), ` ${thoughts.length} Total`)),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Everything you've captured via the dashboard.")
                    ),
                    React.createElement("div", { className: "flex items-center gap-2" },
                        React.createElement("div", { className: "relative hidden md:block" },
                            React.createElement(Search, { className: "absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400", size: 16 }),
                            React.createElement("input", { type: "text", placeholder: "Search thoughts...", className: "pl-10 pr-4 py-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500/50 transition-all" })
                        )
                    )
                ),
                React.createElement("div", { className: "grid grid-cols-1 gap-4 pb-20" },
                    thoughts.map(thought => (
                        React.createElement("div", { key: thought.id, className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-2xl flex flex-col sm:flex-row gap-6 hover:border-purple-500/30 transition-all group relative" },
                            React.createElement("div", { className: "flex-1" },
                                React.createElement("p", { className: "text-zinc-800 dark:text-zinc-200 leading-relaxed whitespace-pre-wrap" }, thought.text),
                                React.createElement("div", { className: "mt-4 flex items-center gap-3 text-xs text-zinc-400" },
                                    React.createElement("span", { className: "flex items-center gap-1" }, React.createElement(Clock, { size: 12 }), ` ${thought.date}`),
                                    React.createElement("span", null, "â€¢"),
                                    React.createElement("span", { className: "bg-zinc-100 dark:bg-zinc-800 px-2 py-0.5 rounded font-medium" }, "Capture")
                                )
                            ),
                            React.createElement("button", { onClick: () => onDeleteThought(thought.id), className: "absolute top-4 right-4 p-2 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg opacity-100 md:opacity-0 group-hover:opacity-100 transition-all" }, React.createElement(Trash2, { size: 16 }))
                        )
                    )),
                    thoughts.length === 0 && React.createElement("div", { className: "text-center py-20 bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl border-2 border-dashed border-zinc-200 dark:border-zinc-800 text-zinc-400" },
                        React.createElement(MessageSquare, { size: 48, className: "mx-auto mb-4 opacity-50" }),
                        React.createElement("p", null, "Your mind is clear. Capture thoughts from the Dashboard.")
                    )
                )
            )
        );

        const ScheduleView = () => {
            const [viewMode, setViewMode] = useState('smart');
            const SCHEDULE_ITEMS = [
                { id: 1, time: '09:00', endTime: '10:30', title: 'Deep Work: System Architecture', type: 'focus', energy: 'High', status: 'completed' },
                { id: 2, time: '10:30', endTime: '10:45', title: 'Bio-Break & Hydration', type: 'break', energy: 'Recharge', status: 'completed' },
                { id: 3, time: '11:00', endTime: '12:00', title: 'Team Sync: Q1 Roadmap', type: 'meeting', energy: 'Medium', status: 'active', platform: 'Zoom' },
                { id: 4, time: '12:30', endTime: '13:30', title: 'Lunch & Reading', type: 'personal', energy: 'Recharge', status: 'upcoming' },
                { id: 5, time: '14:00', endTime: '15:30', title: 'Client Workshop', type: 'meeting', energy: 'High', status: 'upcoming', platform: 'Meet' },
                { id: 6, time: '16:00', endTime: '17:00', title: 'Admin & Email Processing', type: 'shallow', energy: 'Low', status: 'upcoming' }
            ];

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-6" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Schedule", viewMode === 'smart' && React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-xs font-bold uppercase tracking-wider" }, "Live")),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Manage your time and energy.")
                    ),
                    React.createElement("div", { className: "flex p-1 bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg" },
                        React.createElement("button", { onClick: () => setViewMode('smart'), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-all ${viewMode === 'smart' ? 'bg-white dark:bg-zinc-800 shadow-sm text-zinc-900 dark:text-zinc-100' : 'text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300'}` }, "Smart View"),
                        React.createElement("button", { onClick: () => setViewMode('google'), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-all ${viewMode === 'google' ? 'bg-white dark:bg-zinc-800 shadow-sm text-zinc-900 dark:text-zinc-100' : 'text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300'}` }, "G-Cal")
                    )
                ),
                viewMode === 'smart' ? React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 h-full" },
                    React.createElement("div", { className: "lg:col-span-2 flex flex-col gap-6" },
                        React.createElement("div", { className: "bg-gradient-to-br from-indigo-600 to-violet-700 rounded-2xl p-8 text-white shadow-2xl shadow-indigo-500/20 relative overflow-hidden group" },
                            React.createElement("div", { className: "absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none" }),
                            React.createElement("div", { className: "relative z-10 flex justify-between items-start" },
                                React.createElement("div", { className: "inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 backdrop-blur-md border border-white/10 text-xs font-medium tracking-wider uppercase mb-6" },
                                    React.createElement("div", { className: "w-2 h-2 rounded-full bg-emerald-400 animate-pulse" }),
                                    " Current Focus"
                                ),
                                React.createElement("div", { className: "text-right" },
                                    React.createElement("div", { className: "text-3xl font-mono font-bold tracking-tight" }, "11:42"),
                                    React.createElement("div", { className: "text-indigo-200 text-sm" }, "GMT+0")
                                )
                            ),
                            React.createElement("div", { className: "relative z-10 mt-2" },
                                React.createElement("h2", { className: "text-3xl font-bold mb-2" }, "Team Sync: Q1 Roadmap"),
                                React.createElement("div", { className: "flex items-center gap-4 text-indigo-100 text-sm" },
                                    React.createElement("span", { className: "flex items-center gap-1.5" }, React.createElement(Clock, { size: 16 }), " 11:00 - 12:00"),
                                    React.createElement("span", { className: "flex items-center gap-1.5" }, React.createElement(Video, { size: 16 }), " Zoom Room A"),
                                    React.createElement("span", { className: "flex items-center gap-1.5" }, React.createElement(Zap, { size: 16 }), " Med Energy")
                                )
                            ),
                            React.createElement("div", { className: "relative z-10 mt-8" },
                                React.createElement("div", { className: "flex justify-between text-xs font-medium text-indigo-200 mb-2" }, React.createElement("span", null, "42 mins elapsed"), React.createElement("span", null, "18 mins remaining")),
                                React.createElement("div", { className: "w-full h-2 bg-black/20 rounded-full overflow-hidden" }, React.createElement("div", { className: "h-full bg-white/90 rounded-full w-[70%] shadow-[0_0_15px_rgba(255,255,255,0.5)]" }))
                            )
                        ),
                        React.createElement(Card, { title: "Up Next", className: "flex-1" },
                            React.createElement("div", { className: "space-y-4" },
                                SCHEDULE_ITEMS.filter(item => item.status === 'upcoming').map(item => (
                                    React.createElement("div", { key: item.id, className: "flex items-center gap-4 p-4 rounded-xl border border-zinc-100 dark:border-zinc-800/50 hover:border-indigo-500/30 hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-all group" },
                                        React.createElement("div", { className: "flex flex-col items-center min-w-[60px]" },
                                            React.createElement("span", { className: "text-sm font-bold text-zinc-900 dark:text-zinc-100" }, item.time),
                                            React.createElement("span", { className: "text-xs text-zinc-400" }, item.endTime)
                                        ),
                                        React.createElement("div", { className: "w-1 h-10 rounded-full bg-zinc-200 dark:bg-zinc-700 group-hover:bg-indigo-500 transition-colors" }),
                                        React.createElement("div", { className: "flex-1" },
                                            React.createElement("h4", { className: "font-semibold text-zinc-700 dark:text-zinc-200" }, item.title),
                                            React.createElement("div", { className: "flex items-center gap-3 mt-1" },
                                                React.createElement("span", { className: `text-xs px-2 py-0.5 rounded flex items-center gap-1 ${item.energy === 'High' ? 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400' : item.energy === 'Recharge' ? 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400' : 'bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400'}` }, React.createElement(Zap, { size: 10 }), item.energy),
                                                item.type === 'personal' && React.createElement("span", { className: "text-xs text-zinc-400 flex items-center gap-1" }, React.createElement(Coffee, { size: 12 }), " Personal")
                                            )
                                        ),
                                        React.createElement("button", { className: "p-2 rounded-lg text-zinc-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors opacity-0 group-hover:opacity-100" }, React.createElement(ArrowRight, { size: 18 }))
                                    )
                                ))
                            )
                        )
                    ),
                    React.createElement("div", { className: "lg:col-span-1" },
                        React.createElement(Card, { title: "Timeline", className: "h-full" },
                            React.createElement("div", { className: "relative pl-4 space-y-8 mt-2" },
                                React.createElement("div", { className: "absolute left-[19px] top-2 bottom-2 w-[2px] bg-zinc-100 dark:bg-zinc-800" }),
                                SCHEDULE_ITEMS.map(item => (
                                    React.createElement("div", { key: item.id, className: `relative flex gap-4 ${item.status === 'completed' ? 'opacity-50' : ''}` },
                                        React.createElement("div", { className: `relative z-10 w-3 h-3 rounded-full mt-1.5 border-[3px] ${item.status === 'active' ? 'bg-indigo-600 border-indigo-200 dark:border-indigo-900 ring-4 ring-indigo-500/20' : item.status === 'completed' ? 'bg-zinc-300 border-zinc-100 dark:bg-zinc-700 dark:border-zinc-800' : 'bg-white dark:bg-zinc-900 border-indigo-500'}` }),
                                        React.createElement("div", null,
                                            React.createElement("span", { className: `text-xs font-mono mb-0.5 block ${item.status === 'active' ? 'text-indigo-600 font-bold' : 'text-zinc-400'}` }, item.time),
                                            React.createElement("p", { className: `text-sm ${item.status === 'active' ? 'font-semibold text-zinc-900 dark:text-zinc-100' : 'text-zinc-600 dark:text-zinc-400'}` }, item.title)
                                        )
                                    )
                                ))
                            )
                        )
                    )
                ) : React.createElement(Card, { className: "flex-1 p-0 overflow-hidden relative shadow-sm h-[700px] animate-in fade-in zoom-in-95 duration-300" },
                    React.createElement("div", { className: "w-full h-full bg-white" },
                        React.createElement("iframe", { src: "https://calendar.google.com/calendar/embed?height=600&wkst=1&bgcolor=%23ffffff&ctz=UTC&showTitle=0&showNav=1&showDate=1&showPrint=0&showTabs=1&showCalendars=0&src=ZW4udWsjaG9saWRheUBncm91cC52LmNhbGVuZGFyLmdvb2dsZS5jb20&color=%230B8043", style: {border: 0}, width: "100%", height: "100%", frameBorder: "0", scrolling: "no", title: "Google Calendar", className: "w-full h-full" })
                    )
                )
            );
        };

        const BrainstormView = ({ notes, onAddNote, onUpdateNote, onDeleteNote }) => {
            const [mode, setMode] = useState('pointer'); 
            const [paths, setPaths] = useState([]);
            const [currentPath, setCurrentPath] = useState([]);
            const [isDrawing, setIsDrawing] = useState(false);
            const [draggingNote, setDraggingNote] = useState(null);
            const canvasRef = useRef(null);

            const createNewNote = (x, y) => {
                const colors = ["bg-amber-100 dark:bg-amber-900 text-amber-900 dark:text-amber-100", "bg-rose-100 dark:bg-rose-900 text-rose-900 dark:text-rose-100", "bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100", "bg-emerald-100 dark:bg-emerald-900 text-emerald-900 dark:text-emerald-100"];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                onAddNote({ x, y, text: "New Idea", color: randomColor });
            };

            const addNoteCenter = () => {
                if (!canvasRef.current) return;
                const rect = canvasRef.current.getBoundingClientRect();
                createNewNote(Math.max(0, rect.width / 2 - 128), Math.max(0, rect.height / 2 - 64));
            };

            const handleNoteMouseDown = (e, noteId) => {
                if (mode === 'draw') return;
                e.stopPropagation();
                const note = notes.find(n => n.id === noteId);
                setDraggingNote({ id: noteId, startX: e.clientX, startY: e.clientY, initialX: note.x, initialY: note.y });
            };

            const handleCanvasDoubleClick = (e) => {
                if (mode === 'draw' || (e.target !== canvasRef.current && e.target.tagName !== 'svg')) return;
                createNewNote(e.nativeEvent.offsetX - 100, e.nativeEvent.offsetY - 50);
            };

            const handleCanvasMouseDown = (e) => {
                if (mode === 'draw') {
                    setIsDrawing(true);
                    setCurrentPath([{ x: e.nativeEvent.offsetX, y: e.nativeEvent.offsetY }]);
                }
            };

            const handleCanvasMouseMove = (e) => {
                if (draggingNote && mode === 'pointer') {
                    const dx = e.clientX - draggingNote.startX;
                    const dy = e.clientY - draggingNote.startY;
                    onUpdateNote(draggingNote.id, { x: draggingNote.initialX + dx, y: draggingNote.initialY + dy });
                }
                if (isDrawing && mode === 'draw') {
                    setCurrentPath(prev => [...prev, { x: e.nativeEvent.offsetX, y: e.nativeEvent.offsetY }]);
                }
            };

            const handleCanvasMouseUp = () => {
                if (draggingNote) setDraggingNote(null);
                if (isDrawing) {
                    setIsDrawing(false);
                    if (currentPath.length > 1) setPaths(prev => [...prev, currentPath]);
                    setCurrentPath([]);
                }
            };

            const clearCanvas = () => { if (confirm("Clear all drawings? Notes will remain.")) setPaths([]); };
            const pointsToPath = (points) => points.length === 0 ? '' : points.reduce((acc, point, i) => acc + (i === 0 ? `M ${point.x} ${point.y}` : ` L ${point.x} ${point.y}`), '');

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-4" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Brainstorm ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(Sparkles, { size: 12 }), " Canvas")),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Free-form thinking. Double click or use + to add notes.")
                    ),
                    React.createElement("div", { className: "flex gap-2 p-1 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-sm" },
                        React.createElement("button", { onClick: addNoteCenter, className: "p-2 rounded-lg transition-all text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-indigo-600" }, React.createElement(Plus, { size: 18 })),
                        React.createElement("div", { className: "w-[1px] bg-zinc-200 dark:bg-zinc-800 mx-1" }),
                        React.createElement("button", { onClick: () => setMode('pointer'), className: `p-2 rounded-lg transition-all flex items-center gap-2 ${mode === 'pointer' ? 'bg-indigo-600 text-white shadow-md' : 'text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800'}` }, React.createElement(MousePointer2, { size: 18 })),
                        React.createElement("button", { onClick: () => setMode('draw'), className: `p-2 rounded-lg transition-all flex items-center gap-2 ${mode === 'draw' ? 'bg-indigo-600 text-white shadow-md' : 'text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800'}` }, React.createElement(PenTool, { size: 18 })),
                        React.createElement("div", { className: "w-[1px] bg-zinc-200 dark:bg-zinc-800 mx-1" }),
                        React.createElement("button", { onClick: clearCanvas, className: "p-2 text-zinc-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors" }, React.createElement(Eraser, { size: 18 }))
                    )
                ),
                React.createElement("div", { className: "flex-1 relative rounded-3xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-950/50 overflow-hidden shadow-inner min-h-[600px]" },
                    React.createElement("div", { className: "absolute inset-0 opacity-[0.3] dark:opacity-[0.1] pointer-events-none", style: { backgroundImage: 'radial-gradient(#94a3b8 1px, transparent 1px)', backgroundSize: '24px 24px' } }),
                    React.createElement("div", { 
                        ref: canvasRef,
                        className: `absolute inset-0 w-full h-full ${mode === 'pointer' ? 'cursor-default' : 'cursor-crosshair'}`,
                        onDoubleClick: handleCanvasDoubleClick,
                        onMouseDown: handleCanvasMouseDown,
                        onMouseMove: handleCanvasMouseMove,
                        onMouseUp: handleCanvasMouseUp,
                        onMouseLeave: handleCanvasMouseUp
                    },
                        React.createElement("svg", { className: "absolute inset-0 w-full h-full pointer-events-none z-0" },
                            paths.map((path, i) => React.createElement("path", { key: i, d: pointsToPath(path), stroke: "currentColor", strokeWidth: "3", fill: "none", className: "text-zinc-400 dark:text-zinc-600 opacity-80", strokeLinecap: "round", strokeLinejoin: "round" })),
                            currentPath.length > 0 && React.createElement("path", { d: pointsToPath(currentPath), stroke: "currentColor", strokeWidth: "3", fill: "none", className: "text-indigo-500 opacity-80", strokeLinecap: "round", strokeLinejoin: "round" })
                        ),
                        notes.map(note => (
                            React.createElement("div", {
                                key: note.id,
                                onMouseDown: (e) => handleNoteMouseDown(e, note.id),
                                style: { left: note.x, top: note.y, transform: draggingNote?.id === note.id ? 'scale(1.02)' : 'scale(1)', zIndex: draggingNote?.id === note.id ? 50 : 10 },
                                className: `absolute w-64 p-4 rounded-xl shadow-sm border border-black/5 dark:border-white/5 ${note.color} ${mode === 'pointer' ? 'cursor-grab active:cursor-grabbing' : ''} group transition-transform`
                            },
                                React.createElement("div", { className: "flex justify-between items-start mb-2 opacity-50 group-hover:opacity-100 transition-opacity" },
                                    React.createElement(Move, { size: 12 }),
                                    React.createElement("button", { onClick: (e) => { e.stopPropagation(); onDeleteNote(note.id); }, className: "hover:text-red-500" }, React.createElement(Trash2, { size: 12 }))
                                ),
                                React.createElement("textarea", {
                                    value: note.text,
                                    onChange: (e) => onUpdateNote(note.id, { text: e.target.value }),
                                    onMouseDown: (e) => e.stopPropagation(),
                                    onDoubleClick: (e) => e.stopPropagation(),
                                    className: "w-full bg-transparent border-none resize-none focus:ring-0 p-0 text-sm font-medium font-handwriting leading-relaxed h-24",
                                    placeholder: "Write something..."
                                })
                            )
                        ))
                    )
                )
            );
        };

        const GoalsView = ({ goals, onUpdateGoal, onAddGoal }) => {
            const [activeCategory, setActiveCategory] = useState("All");
            const [isAddingGoal, setIsAddingGoal] = useState(false);
            const [newGoal, setNewGoal] = useState({ title: '', category: 'General', target: 100, unit: '%' });

            const getProgress = (current, target) => Math.min(100, Math.round((current / target) * 100));
            const incrementGoal = (id) => {
                const goal = goals.find(g => g.id === id);
                if(goal) onUpdateGoal(id, { current: Math.min(goal.target, goal.current + 1) });
            };
            const categories = ["All", ...new Set(goals.map(g => g.category))];
            const filteredGoals = activeCategory === "All" ? goals : goals.filter(g => g.category === activeCategory);
            const totalProgress = goals.length > 0 ? Math.round(goals.reduce((acc, curr) => acc + getProgress(curr.current, curr.target), 0) / goals.length) : 0;

            const handleAddGoalSubmit = () => {
                if(newGoal.title) {
                    onAddGoal({ ...newGoal, current: 0, type: 'Outcome', timeframe: 'Q1' }); // Defaults
                    setIsAddingGoal(false);
                    setNewGoal({ title: '', category: 'General', target: 100, unit: '%' });
                }
            };

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Mission Control ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(Crosshair, { size: 12 }), " Active")),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Target acquisition and progress tracking.")
                    ),
                    React.createElement("button", { onClick: () => setIsAddingGoal(true), className: "flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition-colors shadow-lg shadow-indigo-500/20" }, React.createElement(Plus, { size: 16 }), " Set Target")
                ),
                
                // Add Goal Modal
                isAddingGoal && React.createElement("div", { className: "fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 rounded-2xl p-6 w-full max-w-md border border-zinc-200 dark:border-zinc-800 shadow-2xl" },
                         React.createElement("div", { className: "flex justify-between items-center mb-6" },
                            React.createElement("h3", { className: "text-xl font-bold" }, "New Goal"),
                            React.createElement("button", { onClick: () => setIsAddingGoal(false), className: "p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg" }, React.createElement(X, { size: 20 }))
                         ),
                         React.createElement("div", { className: "space-y-4" },
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-sm text-zinc-500 mb-1 block" }, "Goal Title"),
                                React.createElement("input", { type: "text", className: "w-full p-2 rounded-lg bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-base", value: newGoal.title, onChange: e => setNewGoal({...newGoal, title: e.target.value}) })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-sm text-zinc-500 mb-1 block" }, "Category"),
                                React.createElement("input", { type: "text", className: "w-full p-2 rounded-lg bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-base", value: newGoal.category, onChange: e => setNewGoal({...newGoal, category: e.target.value}) })
                            ),
                            React.createElement("div", { className: "flex gap-4" },
                                React.createElement("div", { className: "flex-1" },
                                    React.createElement("label", { className: "text-sm text-zinc-500 mb-1 block" }, "Target Value"),
                                    React.createElement("input", { type: "number", className: "w-full p-2 rounded-lg bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-base", value: newGoal.target, onChange: e => setNewGoal({...newGoal, target: parseInt(e.target.value) || 0}) })
                                ),
                                React.createElement("div", { className: "flex-1" },
                                    React.createElement("label", { className: "text-sm text-zinc-500 mb-1 block" }, "Unit"),
                                    React.createElement("input", { type: "text", className: "w-full p-2 rounded-lg bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-base", value: newGoal.unit, onChange: e => setNewGoal({...newGoal, unit: e.target.value}) })
                                )
                            )
                         ),
                         React.createElement("div", { className: "mt-6 flex justify-end gap-2" },
                            React.createElement("button", { onClick: () => setIsAddingGoal(false), className: "px-4 py-2 text-sm text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100" }, "Cancel"),
                            React.createElement("button", { onClick: handleAddGoalSubmit, className: "px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700" }, "Create Goal")
                         )
                    )
                ),

                React.createElement("div", { className: "mb-8 p-6 rounded-2xl bg-zinc-900 dark:bg-black text-white relative overflow-hidden border border-zinc-800" },
                    React.createElement("div", { className: "absolute top-0 right-0 w-96 h-96 bg-indigo-600/20 rounded-full blur-[100px] -mr-20 -mt-20 pointer-events-none" }),
                    React.createElement("div", { className: "relative z-10 flex flex-col md:flex-row justify-between items-center gap-6" },
                        React.createElement("div", { className: "flex items-center gap-6" },
                            React.createElement("div", { className: "relative w-24 h-24 flex items-center justify-center" },
                                React.createElement("svg", { className: "w-full h-full transform -rotate-90" },
                                    React.createElement("circle", { cx: "48", cy: "48", r: "40", stroke: "currentColor", strokeWidth: "8", fill: "transparent", className: "text-zinc-800" }),
                                    React.createElement("circle", { cx: "48", cy: "48", r: "40", stroke: "currentColor", strokeWidth: "8", fill: "transparent", strokeDasharray: 251.2, strokeDashoffset: 251.2 - (251.2 * totalProgress) / 100, className: "text-cyan-400 transition-all duration-1000 ease-out" })
                                ),
                                React.createElement("div", { className: "absolute inset-0 flex flex-col items-center justify-center" },
                                    React.createElement("span", { className: "text-2xl font-bold" }, `${totalProgress}%`)
                                )
                            ),
                            React.createElement("div", null,
                                React.createElement("h4", { className: "text-lg font-semibold" }, "Overall Trajectory"),
                                React.createElement("p", { className: "text-zinc-400 text-sm" }, "You are on track to achieve your annual vision."),
                                React.createElement("div", { className: "flex gap-4 mt-2 text-sm" },
                                    React.createElement("span", { className: "text-emerald-400 flex items-center gap-1" }, React.createElement(TrendingUp, { size: 14 }), " +12% this month"),
                                    React.createElement("span", { className: "text-zinc-500" }, `${goals.length} Goals Active`)
                                )
                            )
                        )
                    )
                ),
                React.createElement("div", { className: "flex gap-2 mb-6 overflow-x-auto pb-2" },
                    categories.map(cat => React.createElement("button", { key: cat, onClick: () => setActiveCategory(cat), className: `px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${activeCategory === cat ? 'bg-zinc-900 text-white dark:bg-white dark:text-black' : 'bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700'}` }, cat))
                ),
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-20" },
                    filteredGoals.map(goal => (
                        React.createElement("div", { key: goal.id, className: "group relative bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-6 hover:border-indigo-500/50 transition-all duration-300" },
                            React.createElement("div", { className: "flex justify-between items-start mb-4" },
                                React.createElement("span", { className: `px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider ${goal.category === 'Health' ? 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400' : goal.category === 'Career' ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400' : goal.category === 'Finance' ? 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400' : 'bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400'}` }, goal.category),
                                React.createElement("span", { className: "text-xs text-zinc-400 font-mono" }, goal.timeframe)
                            ),
                            React.createElement("h4", { className: "text-lg font-bold mb-1" }, goal.title),
                            React.createElement("div", { className: "flex justify-between items-end mb-4" },
                                React.createElement("span", { className: "text-sm text-zinc-500" }, goal.type),
                                React.createElement("span", { className: "text-2xl font-mono font-bold text-zinc-900 dark:text-zinc-100" }, goal.current, " ", React.createElement("span", { className: "text-sm text-zinc-400 font-normal" }, `/ ${goal.target} ${goal.unit}`))
                            ),
                            React.createElement("div", { className: "h-2 w-full bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden mb-4" },
                                React.createElement("div", { className: "h-full bg-gradient-to-r from-indigo-500 to-cyan-400 rounded-full transition-all duration-500", style: { width: `${getProgress(goal.current, goal.target)}%` } })
                            ),
                            React.createElement("div", { className: "flex justify-between items-center mt-2" },
                                React.createElement("span", { className: "text-xs font-bold text-indigo-600 dark:text-indigo-400" }, `${getProgress(goal.current, goal.target)}% Complete`),
                                React.createElement("button", { onClick: () => incrementGoal(goal.id), className: "w-8 h-8 flex items-center justify-center rounded-full bg-zinc-50 dark:bg-zinc-800 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 hover:text-indigo-600 transition-colors" }, React.createElement(Plus, { size: 16 }))
                            )
                        )
                    )),
                    React.createElement("button", { onClick: () => setIsAddingGoal(true), className: "border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl p-6 flex flex-col items-center justify-center text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/10 transition-all min-h-[200px] gap-3 group" },
                        React.createElement("div", { className: "w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/50 flex items-center justify-center transition-colors" }, React.createElement(Target, { size: 24 })),
                        React.createElement("span", { className: "font-medium" }, "Initialize New Objective")
                    )
                )
            );
        };

        const LibraryView = ({ books, onAddBook, onUpdateBook }) => {
            const [activeFilter, setActiveFilter] = useState("All");
            const [selectedBook, setSelectedBook] = useState(null);
            const [isAddingBook, setIsAddingBook] = useState(false);
            const [newBook, setNewBook] = useState({ title: '', author: '', category: 'General' });

            const categories = ["All", ...new Set(books.map(b => b.category))];
            const filteredBooks = activeFilter === "All" ? books : books.filter(b => b.category === activeFilter);
            
            const getStatusColor = (status) => status === "Reading" ? "text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20" : status === "Finished" ? "text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20" : "text-zinc-500 bg-zinc-100 dark:bg-zinc-800";

            const handleAddBookSubmit = () => {
                if(newBook.title && newBook.author) {
                    onAddBook({ ...newBook, status: 'To Read', progress: 0, rating: 0, coverColor: 'bg-indigo-600', notes: '' });
                    setIsAddingBook(false);
                    setNewBook({ title: '', author: '', category: 'General' });
                }
            };

            const toggleStatus = (book) => {
                 const nextStatus = book.status === 'To Read' ? 'Reading' : book.status === 'Reading' ? 'Finished' : 'To Read';
                 onUpdateBook(book.id, { status: nextStatus });
            };

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Library ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(BookOpen, { size: 12 }), ` ${books.length} Books`)),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Knowledge repository and reading tracker.")
                    ),
                    React.createElement("button", { onClick: () => setIsAddingBook(true), className: "flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition-colors shadow-lg shadow-indigo-500/20" }, React.createElement(Plus, { size: 16 }), " Add Book")
                ),
                React.createElement("div", { className: "flex gap-2 mb-8 overflow-x-auto pb-2" },
                    categories.map(cat => React.createElement("button", { key: cat, onClick: () => setActiveFilter(cat), className: `px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${activeFilter === cat ? 'bg-zinc-900 text-white dark:bg-white dark:text-black' : 'bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700'}` }, cat))
                ),
                React.createElement("div", { className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 pb-20" },
                    filteredBooks.map(book => (
                        React.createElement("div", { key: book.id, onClick: () => setSelectedBook(book), className: "group relative flex flex-col gap-3 cursor-pointer" },
                            React.createElement("div", { className: `aspect-[2/3] w-full rounded-xl ${book.coverColor} shadow-lg group-hover:shadow-xl group-hover:-translate-y-1 transition-all duration-300 relative overflow-hidden` },
                                React.createElement("div", { className: "absolute left-0 top-0 bottom-0 w-2 bg-black/20 z-10" }),
                                React.createElement("div", { className: "absolute inset-0 p-4 flex flex-col justify-between text-white/90" },
                                    React.createElement("div", { className: "flex justify-end" }, book.status === 'Finished' && React.createElement(CheckCircle2, { size: 20, className: "text-white/80" }), book.status === 'Reading' && React.createElement(Book, { size: 20, className: "text-white/80" })),
                                    React.createElement("div", null,
                                        React.createElement("h4", { className: "font-bold font-serif text-lg leading-tight mb-1 line-clamp-3" }, book.title),
                                        React.createElement("p", { className: "text-xs opacity-75 font-medium" }, book.author)
                                    )
                                ),
                                book.status === 'Reading' && React.createElement("div", { className: "absolute bottom-0 left-0 right-0 h-1.5 bg-black/20" }, React.createElement("div", { className: "h-full bg-white/90", style: { width: `${book.progress}%` } }))
                            ),
                            React.createElement("div", null,
                                React.createElement("div", { className: "flex justify-between items-start" },
                                    React.createElement("h5", { className: "font-medium text-zinc-900 dark:text-zinc-100 text-sm line-clamp-1" }, book.title),
                                    React.createElement("button", { className: "text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200" }, React.createElement(MoreHorizontal, { size: 16 }))
                                ),
                                React.createElement("div", { className: "flex items-center justify-between mt-1" },
                                    React.createElement("span", { className: `text-[10px] font-bold px-1.5 py-0.5 rounded ${getStatusColor(book.status)}` }, book.status),
                                    book.status === 'Finished' && React.createElement("div", { className: "flex gap-0.5 text-amber-400" }, [...Array(5)].map((_, i) => React.createElement(Star, { key: i, size: 10, fill: i < book.rating ? "currentColor" : "none", className: i >= book.rating ? "text-zinc-300 dark:text-zinc-700" : "" }))),
                                    book.status === 'Reading' && React.createElement("span", { className: "text-xs text-zinc-500 font-mono" }, `${book.progress}%`)
                                )
                            )
                        )
                    )),
                    React.createElement("button", { onClick: () => setIsAddingBook(true), className: "aspect-[2/3] w-full rounded-xl border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center gap-3 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/10 transition-all" },
                        React.createElement("div", { className: "w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center" }, React.createElement(Plus, { size: 20 })),
                        React.createElement("span", { className: "text-sm font-medium" }, "Add Book")
                    )
                ),
                
                // Add Book Modal
                isAddingBook && React.createElement("div", { className: "fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 rounded-2xl p-6 w-full max-w-md border border-zinc-200 dark:border-zinc-800 shadow-2xl" },
                         React.createElement("div", { className: "flex justify-between items-center mb-6" },
                            React.createElement("h3", { className: "text-xl font-bold" }, "New Book"),
                            React.createElement("button", { onClick: () => setIsAddingBook(false), className: "p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg" }, React.createElement(X, { size: 20 }))
                         ),
                         React.createElement("div", { className: "space-y-4" },
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-sm text-zinc-500 mb-1 block" }, "Title"),
                                React.createElement("input", { type: "text", className: "w-full p-2 rounded-lg bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-base", value: newBook.title, onChange: e => setNewBook({...newBook, title: e.target.value}) })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-sm text-zinc-500 mb-1 block" }, "Author"),
                                React.createElement("input", { type: "text", className: "w-full p-2 rounded-lg bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-base", value: newBook.author, onChange: e => setNewBook({...newBook, author: e.target.value}) })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-sm text-zinc-500 mb-1 block" }, "Category"),
                                React.createElement("input", { type: "text", className: "w-full p-2 rounded-lg bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-base", value: newBook.category, onChange: e => setNewBook({...newBook, category: e.target.value}) })
                            )
                         ),
                         React.createElement("div", { className: "mt-6 flex justify-end gap-2" },
                            React.createElement("button", { onClick: () => setIsAddingBook(false), className: "px-4 py-2 text-sm text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100" }, "Cancel"),
                            React.createElement("button", { onClick: handleAddBookSubmit, className: "px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700" }, "Add to Library")
                         )
                    )
                ),

                // Book Details Modal
                selectedBook && React.createElement("div", { className: "fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 rounded-2xl w-full max-w-2xl border border-zinc-200 dark:border-zinc-800 shadow-2xl overflow-hidden flex flex-col md:flex-row max-h-[90vh]" },
                         // Cover Section
                         React.createElement("div", { className: `w-full md:w-1/3 ${selectedBook.coverColor} p-6 flex flex-col justify-between text-white relative` },
                             React.createElement("div", null,
                                 React.createElement("h3", { className: "text-2xl font-serif font-bold leading-tight mb-2" }, selectedBook.title),
                                 React.createElement("p", { className: "opacity-80 font-medium" }, selectedBook.author)
                             ),
                             React.createElement("div", { className: "mt-6 md:mt-0" },
                                 React.createElement("div", { className: "flex items-center gap-1 mb-4" },
                                     [...Array(5)].map((_, i) => React.createElement(Star, { key: i, size: 16, fill: i < selectedBook.rating ? "currentColor" : "none", className: "cursor-pointer", onClick: () => onUpdateBook(selectedBook.id, { rating: i + 1 }) }))
                                 ),
                                 React.createElement("button", { onClick: () => toggleStatus(selectedBook), className: "w-full py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg text-sm font-medium transition-colors" }, selectedBook.status)
                             )
                         ),
                         // Details Section
                         React.createElement("div", { className: "flex-1 p-6 flex flex-col" },
                             React.createElement("div", { className: "flex justify-between items-start mb-6" },
                                 React.createElement("h4", { className: "text-lg font-bold flex items-center gap-2" }, React.createElement(Edit3, { size: 18 }), " Notes & Takeaways"),
                                 React.createElement("button", { onClick: () => setSelectedBook(null), className: "p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg" }, React.createElement(X, { size: 20 }))
                             ),
                             React.createElement("textarea", { 
                                 className: "flex-1 w-full bg-zinc-50 dark:bg-zinc-950 p-4 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500/20 mb-4 min-h-[200px] text-base",
                                 placeholder: "Write your thoughts, quotes, and lessons learned...",
                                 value: selectedBook.notes || '',
                                 onChange: (e) => {
                                     const updatedBook = { ...selectedBook, notes: e.target.value };
                                     setSelectedBook(updatedBook);
                                     onUpdateBook(selectedBook.id, { notes: e.target.value });
                                 }
                             }),
                             React.createElement("div", { className: "flex justify-between items-center text-xs text-zinc-500" },
                                 React.createElement("span", null, "Category: ", selectedBook.category),
                                 React.createElement("button", { onClick: () => { /* Delete logic */ }, className: "text-red-500 hover:underline" }, "Remove Book")
                             )
                         )
                    )
                )
            );
        };

        const EntertainmentView = () => (
            React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Entertainment ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(PlayCircle, { size: 12 }), " Curated")),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Intentional consumption. Stop doom-scrolling, start enjoying.")
                    ),
                    React.createElement("div", { className: "flex items-center gap-2" },
                        React.createElement("div", { className: "text-xs text-zinc-400 mr-2 hidden sm:block" }, "\"Time you enjoy wasting is not wasted time.\""),
                        React.createElement("button", { className: "flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition-colors shadow-lg shadow-indigo-500/20" }, React.createElement(Plus, { size: 16 }), " Add Platform")
                    )
                ),
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pb-20" },
                    React.createElement(Card, { title: "Cinema & TV", className: "gap-4" },
                        React.createElement("div", { className: "grid grid-cols-3 gap-3" },
                            React.createElement(QuickLinkButton, { href: "https://www.netflix.com/browse", icon: Film, label: "Netflix", colorClass: "text-red-600" }),
                            React.createElement(QuickLinkButton, { href: "https://www.amazon.co.uk/gp/video/storefront", icon: Tv, label: "Prime Video", colorClass: "text-blue-400" }),
                            React.createElement(QuickLinkButton, { href: "https://www.disneyplus.com/", icon: Sparkles, label: "Disney+", colorClass: "text-indigo-500" }),
                            React.createElement(QuickLinkButton, { href: "https://mubi.com/", icon: Film, label: "Mubi", colorClass: "text-zinc-800 dark:text-zinc-200" }),
                            React.createElement(QuickLinkButton, { href: "https://www.youtube.com/", icon: MonitorPlay, label: "YouTube", colorClass: "text-red-500" })
                        )
                    ),
                    React.createElement(Card, { title: "Learning", className: "gap-4" },
                        React.createElement("div", { className: "grid grid-cols-3 gap-3" },
                            React.createElement(QuickLinkButton, { href: "https://nebula.tv/", icon: Rocket, label: "Nebula", colorClass: "text-cyan-500" }),
                            React.createElement(QuickLinkButton, { href: "https://curiositystream.com/", icon: Lightbulb, label: "Curiosity", colorClass: "text-amber-500" }),
                            React.createElement(QuickLinkButton, { href: "https://www.ted.com/talks", icon: Video, label: "TED", colorClass: "text-red-600" }),
                            React.createElement(QuickLinkButton, { href: "https://www.masterclass.com/", icon: GraduationCap, label: "MasterClass", colorClass: "text-zinc-900 dark:text-zinc-100" })
                        )
                    ),
                    React.createElement(Card, { title: "Audio", className: "gap-4" },
                        React.createElement("div", { className: "grid grid-cols-3 gap-3" },
                            React.createElement(QuickLinkButton, { href: "https://open.spotify.com/", icon: Music, label: "Spotify", colorClass: "text-green-500" }),
                            React.createElement(QuickLinkButton, { href: "https://podcasts.google.com/", icon: Headphones, label: "Podcasts", colorClass: "text-blue-500" }),
                            React.createElement(QuickLinkButton, { href: "https://www.audible.co.uk/", icon: Book, label: "Audible", colorClass: "text-orange-500" })
                        )
                    ),
                    React.createElement(Card, { title: "Gaming", className: "gap-4" },
                        React.createElement("div", { className: "grid grid-cols-3 gap-3" },
                            React.createElement(QuickLinkButton, { href: "https://store.steampowered.com/", icon: Gamepad2, label: "Steam", colorClass: "text-indigo-900 dark:text-indigo-400" }),
                            React.createElement(QuickLinkButton, { href: "https://www.twitch.tv/", icon: Video, label: "Twitch", colorClass: "text-purple-500" })
                        )
                    )
                )
            )
        );

        const ProjectsView = ({ projects, onUpdateProject, onDeleteProject, onAddProject }) => {
            const [filter, setFilter] = useState('All');
            const [newProjectTitle, setNewProjectTitle] = useState('');
            const [newProjectDeadline, setNewProjectDeadline] = useState('');

            const filteredProjects = filter === 'All' ? projects : projects.filter(p => p.status === filter);

            const handleAdd = () => {
                if(!newProjectTitle.trim()) return;
                onAddProject(newProjectTitle, newProjectDeadline || undefined);
                setNewProjectTitle('');
                setNewProjectDeadline('');
            };

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Projects ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(Layers, { size: 12 }), ` ${projects.length} Total`)),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Manage your active endeavors and track progress.")
                    ),
                    React.createElement("div", { className: "flex gap-2" },
                        React.createElement("input", { type: "text", value: newProjectTitle, onChange: (e) => setNewProjectTitle(e.target.value), placeholder: "New Project Name...", className: "px-4 py-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50 transition-all w-32 md:w-64", onKeyDown: (e) => e.key === 'Enter' && handleAdd() }),
                        React.createElement("input", { type: "date", value: newProjectDeadline, onChange: (e) => setNewProjectDeadline(e.target.value), className: "px-4 py-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50 transition-all text-zinc-500 dark:text-zinc-400 hidden md:block" }),
                        React.createElement("button", { onClick: handleAdd, className: "flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium transition-colors shadow-lg shadow-emerald-500/20" }, React.createElement(Plus, { size: 16 }), " Add")
                    )
                ),
                React.createElement("div", { className: "flex gap-2 mb-6 overflow-x-auto pb-2" },
                    ['All', 'Active', 'On Hold', 'Completed'].map(f => React.createElement("button", { key: f, onClick: () => setFilter(f), className: `px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${filter === f ? 'bg-zinc-900 text-white dark:bg-white dark:text-black' : 'bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700'}` }, f))
                ),
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pb-20" },
                    filteredProjects.map(project => (
                        React.createElement(Card, { key: project.id, title: project.category, className: "group relative hover:border-emerald-500/30 transition-all" },
                            React.createElement("div", { className: "absolute top-4 right-4 flex gap-2" },
                                React.createElement("span", { className: `text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-wider ${project.status === 'Active' ? 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400' : project.status === 'Completed' ? 'bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-400' : 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400'}` }, project.status),
                                React.createElement("button", { onClick: () => onDeleteProject(project.id), className: "text-zinc-400 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100" }, React.createElement(Trash2, { size: 16 }))
                            ),
                            React.createElement("div", { className: "mt-2 mb-6" },
                                React.createElement("h4", { className: "text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-1" }, project.title),
                                React.createElement(ProjectRow, { title: "", progress: project.progress, color: project.color, deadline: project.deadline })
                            ),
                            React.createElement("div", { className: "flex justify-between items-center mt-auto pt-4 border-t border-zinc-100 dark:border-zinc-800" },
                                React.createElement("div", { className: "flex gap-2" },
                                    React.createElement("button", { onClick: () => onUpdateProject(project.id, { progress: Math.max(0, project.progress - 10) }), className: "p-1.5 rounded-lg bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400 transition-colors" }, React.createElement(Minus, { size: 14 })),
                                    React.createElement("button", { onClick: () => onUpdateProject(project.id, { progress: Math.min(100, project.progress + 10) }), className: "p-1.5 rounded-lg bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400 transition-colors" }, React.createElement(Plus, { size: 14 }))
                                ),
                                React.createElement("div", { className: "flex gap-2" },
                                    project.status !== 'Completed' && React.createElement("button", { onClick: () => onUpdateProject(project.id, { status: 'Completed', progress: 100 }), className: "text-xs font-medium text-zinc-500 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors" }, "Complete"),
                                    project.status === 'Active' && React.createElement("button", { onClick: () => onUpdateProject(project.id, { status: 'On Hold' }), className: "text-xs font-medium text-zinc-500 hover:text-amber-600 dark:hover:text-amber-400 transition-colors" }, "Pause"),
                                    project.status === 'On Hold' && React.createElement("button", { onClick: () => onUpdateProject(project.id, { status: 'Active' }), className: "text-xs font-medium text-zinc-500 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors" }, "Resume")
                                )
                            )
                        )
                    )),
                    filteredProjects.length === 0 && React.createElement("div", { className: "col-span-full py-12 text-center text-zinc-400 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl" },
                        React.createElement(Folder, { size: 48, className: "mx-auto mb-4 opacity-50" }),
                        React.createElement("p", null, "No projects found in this filter.")
                    )
                )
            );
        };

        const LoginScreen = ({ onLogin, isConnected }) => {
            const [pin, setPin] = useState('');
            const [error, setError] = useState(false);
            const [mode, setMode] = useState('login'); 
            // Encrypted Default PIN '643796' -> Base64
            // In a real app, you would fetch this hash from the DB if configured
            const [correctPinHash, setCorrectPinHash] = useState('NjQzNzk2'); 
            const [street, setStreet] = useState('');
            const [mother, setMother] = useState('');
            const [newPin, setNewPin] = useState('');
            const [confirmPin, setConfirmPin] = useState('');

            // If we have a DB connection, try to fetch the real PIN hash
            // This allows the PIN change to persist across devices
            useEffect(() => {
                const fetchPin = async () => {
                    if (!auth.currentUser) return; // Wait for auth
                    try {
                        const docRef = doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'user_settings', 'security');
                        const docSnap = await getDoc(docRef);
                        if (docSnap.exists() && docSnap.data().pinHash) {
                            setCorrectPinHash(docSnap.data().pinHash);
                        }
                    } catch (e) {
                        console.error("Error fetching PIN:", e);
                    }
                };
                if(isConnected) fetchPin();
            }, [isConnected]);


            useEffect(() => {
                if (mode !== 'login') return;
                const handleKeyDown = (e) => {
                    if (e.key >= '0' && e.key <= '9') handleNumberClick(e.key);
                    else if (e.key === 'Backspace') handleBackspace();
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [pin, mode]);

            const handleNumberClick = (num) => {
                if (pin.length < 6) {
                    const newPin = pin + num;
                    setPin(newPin);
                    if (newPin.length === 6) {
                        // Compare entered PIN (hashed) with stored hash
                        // For demo simple base64, real app use bcrypt etc
                        if (btoa(newPin) === correctPinHash) onLogin();
                        else {
                            setError(true);
                            setTimeout(() => { setPin(''); setError(false); }, 500);
                        }
                    }
                }
            };

            const handleBackspace = () => { setPin(prev => prev.slice(0, -1)); setError(false); };

            const handleRecoverySubmit = () => {
                // Simple check for demo
                if (street.trim() && mother.trim()) setMode('set_new_pin');
                else alert("Please answer both security questions.");
            };

            const handleSetNewPin = async () => {
                if (newPin.length === 6 && newPin === confirmPin) {
                    const newHash = btoa(newPin);
                    setCorrectPinHash(newHash);
                    
                    if (isConnected) {
                         try {
                            const docRef = doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'user_settings', 'security');
                            await setDoc(docRef, { pinHash: newHash }, { merge: true });
                         } catch (e) {
                             console.error("Error saving PIN:", e);
                             alert("PIN changed locally, but failed to sync to cloud.");
                             // proceed to login anyway
                         }
                    }
                    
                    setMode('login'); 
                    setPin(''); setNewPin(''); setConfirmPin(''); 
                    alert("Password successfully changed.");
                } else alert("PINs do not match or are not 6 digits.");
            };

            return React.createElement("div", { className: "min-h-screen bg-zinc-950 flex flex-col items-center justify-center relative overflow-hidden font-mono selection:bg-indigo-500/30" },
                 React.createElement("div", { className: "absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none" },
                    React.createElement("div", { className: "absolute top-1/4 left-1/4 w-96 h-96 bg-indigo-600/10 rounded-full blur-[120px] animate-pulse" }),
                    React.createElement("div", { className: "absolute bottom-1/4 right-1/4 w-96 h-96 bg-emerald-600/10 rounded-full blur-[120px] animate-pulse", style: { animationDelay: '2s' } }),
                    React.createElement("div", { className: "absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_50%,#000_70%,transparent_100%)]" })
                 ),
                 React.createElement("div", { className: "z-10 flex flex-col items-center gap-8 animate-in fade-in zoom-in duration-700 w-full max-w-md p-6" },
                     React.createElement("div", { className: "flex flex-col items-center gap-4 mb-4" },
                         React.createElement("div", { className: "w-20 h-20 bg-gradient-to-br from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center text-white shadow-2xl shadow-indigo-500/20 mb-2 ring-1 ring-white/10" },
                             mode === 'login' ? React.createElement(Fingerprint, { size: 40 }) : mode === 'recovery_questions' ? React.createElement(ShieldQuestion, { size: 40 }) : React.createElement(KeyRound, { size: 40 })
                         ),
                         React.createElement("div", { className: "text-center space-y-1" },
                             React.createElement("h1", { className: "text-2xl font-bold text-white tracking-tight" }, mode === 'login' ? 'IDENTITY VERIFICATION' : mode === 'recovery_questions' ? 'SECURITY CHECK' : 'RESET CREDENTIALS'),
                             React.createElement("p", { className: "text-zinc-500 text-xs tracking-widest uppercase" }, "Kaizen OS â€¢ Secure Access")
                         )
                     ),
                     mode === 'login' && React.createElement(React.Fragment, null,
                         React.createElement("div", { className: `flex gap-4 mb-4 ${error ? 'animate-shake' : ''}` },
                             [0,1,2,3,4,5].map(i => React.createElement("div", { key: i, className: `w-3 h-3 rounded-full border-2 transition-all duration-300 ${i < pin.length ? error ? 'bg-red-500 border-red-500 shadow-[0_0_15px_rgba(239,68,68,0.5)]' : 'bg-indigo-500 border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.5)]' : 'border-zinc-700 bg-zinc-900/50'}` }))
                         ),
                         React.createElement("div", { className: "grid grid-cols-3 gap-4 w-full max-w-[280px]" },
                             [1,2,3,4,5,6,7,8,9].map(num => React.createElement("button", { key: num, onClick: () => handleNumberClick(num.toString()), className: "h-16 w-16 rounded-full bg-zinc-900/50 border border-zinc-800 text-zinc-100 text-xl font-medium hover:bg-zinc-800 hover:border-zinc-700 active:scale-95 transition-all flex items-center justify-center" }, num)),
                             React.createElement("div", { className: "h-16 w-16 flex items-center justify-center pointer-events-none" }),
                             React.createElement("button", { onClick: () => handleNumberClick('0'), className: "h-16 w-16 rounded-full bg-zinc-900/50 border border-zinc-800 text-zinc-100 text-xl font-medium hover:bg-zinc-800 hover:border-zinc-700 active:scale-95 transition-all flex items-center justify-center" }, "0"),
                             React.createElement("button", { onClick: handleBackspace, className: "h-16 w-16 rounded-full bg-transparent text-zinc-500 hover:text-zinc-300 active:scale-95 transition-all flex items-center justify-center" }, React.createElement(Delete, { size: 24 }))
                         ),
                         React.createElement("button", { onClick: () => setMode('recovery_questions'), className: "text-xs text-zinc-600 hover:text-indigo-400 mt-4 underline underline-offset-4 transition-colors" }, "Forgot PIN?")
                     ),
                     mode === 'recovery_questions' && React.createElement("div", { className: "w-full space-y-4 animate-in fade-in slide-in-from-right-8 duration-500" },
                         React.createElement("div", { className: "space-y-1" },
                             React.createElement("label", { className: "text-xs text-zinc-500 uppercase tracking-wider ml-1" }, "Childhood Street"),
                             React.createElement("input", { type: "text", value: street, onChange: (e) => setStreet(e.target.value), className: "w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500 transition-colors", placeholder: "Enter answer..." })
                         ),
                         React.createElement("div", { className: "space-y-1" },
                             React.createElement("label", { className: "text-xs text-zinc-500 uppercase tracking-wider ml-1" }, "Mother's Maiden Name"),
                             React.createElement("input", { type: "text", value: mother, onChange: (e) => setMother(e.target.value), className: "w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500 transition-colors", placeholder: "Enter answer..." })
                         ),
                         React.createElement("div", { className: "flex gap-3 pt-4" },
                            React.createElement("button", { onClick: () => setMode('login'), className: "flex-1 py-3 rounded-xl border border-zinc-800 text-zinc-400 hover:text-white hover:bg-zinc-900 transition-all text-sm font-medium" }, "Cancel"),
                            React.createElement("button", { onClick: handleRecoverySubmit, className: "flex-1 py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-all text-sm font-medium" }, "Verify")
                         )
                     ),
                     mode === 'set_new_pin' && React.createElement("div", { className: "w-full space-y-4 animate-in fade-in slide-in-from-right-8 duration-500" },
                        React.createElement("div", { className: "space-y-1" },
                            React.createElement("label", { className: "text-xs text-zinc-500 uppercase tracking-wider ml-1" }, "New 6-Digit PIN"),
                            React.createElement("input", { type: "password", value: newPin, onChange: e => setNewPin(e.target.value.replace(/\D/g, '').slice(0, 6)), className: "w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500 transition-colors text-center tracking-[0.5em] text-lg", placeholder: "â€¢â€¢â€¢â€¢â€¢â€¢" })
                        ),
                        React.createElement("div", { className: "space-y-1" },
                            React.createElement("label", { className: "text-xs text-zinc-500 uppercase tracking-wider ml-1" }, "Confirm PIN"),
                            React.createElement("input", { type: "password", value: confirmPin, onChange: e => setConfirmPin(e.target.value.replace(/\D/g, '').slice(0, 6)), className: "w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500 transition-colors text-center tracking-[0.5em] text-lg", placeholder: "â€¢â€¢â€¢â€¢â€¢â€¢" })
                        ),
                        React.createElement("div", { className: "pt-4" },
                            React.createElement("button", { onClick: handleSetNewPin, className: "w-full py-3 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 transition-all text-sm font-medium flex items-center justify-center gap-2" }, React.createElement(RotateCcw, { size: 16 }), " Reset Password")
                        )
                     ),
                     React.createElement("div", { className: "flex flex-col items-center gap-2 mt-4" },
                         React.createElement("div", { className: "flex items-center gap-2 text-[10px] text-zinc-600 font-mono uppercase tracking-widest" },
                             React.createElement(Lock, { size: 10 }),
                             React.createElement("span", null, mode === 'login' ? 'System Locked' : 'Secure Recovery Mode')
                         ),
                         React.createElement("div", { className: `flex items-center gap-1.5 text-[10px] font-mono ${isConnected ? 'text-emerald-500' : 'text-zinc-600'}` },
                            React.createElement(isConnected ? Wifi : WifiOff, { size: 10 }),
                            React.createElement("span", null, isConnected ? "Database Connected" : "Local Mode Only")
                         )
                     )
                 )
            );
        };

        // --- MAIN APP COMPONENT ---

        const App = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [darkMode, setDarkMode] = useState(true);
            const [noteInput, setNoteInput] = useState('');
            const [isLocked, setIsLocked] = useState(true);
            const [user, setUser] = useState(null);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [authError, setAuthError] = useState(null); // Add state for auth error
            
            // Dummy Data for fallback
            const [thoughts, setThoughts] = useState([]);
            const [projects, setProjects] = useState([]);
            const [goals, setGoals] = useState([]);
            const [books, setBooks] = useState([]);
            const [notes, setNotes] = useState([]); 

            useEffect(() => {
                if(darkMode) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');
            }, [darkMode]);

            // --- AUTH LOGIC ---
            useEffect(() => {
                if (isFirebaseConfigured) {
                    const unsubscribe = onAuthStateChanged(auth, (u) => {
                        setUser(u);
                        if (u) setAuthError(null);
                    });

                    const initAuth = async () => {
                        try {
                            // 1. Try Custom Token (Priority for environment)
                            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                                await signInWithCustomToken(auth, __initial_auth_token);
                            } else {
                                // 2. Fallback to Anonymous (Needs enabling in Console)
                                await signInAnonymously(auth);
                            }
                        } catch (e) {
                            // Gracefully handle missing configuration
                            if (e.code === 'auth/configuration-not-found' || e.code === 'auth/operation-not-allowed') {
                                console.warn("App running in Offline Mode: Anonymous Auth is disabled in Firebase Console.");
                            } else {
                                console.error("Auth Initialization Error:", e);
                            }
                            setAuthError(e.message);
                        }
                    };

                    if (!auth.currentUser) {
                        initAuth();
                    }
                    return () => unsubscribe();
                }
            }, []);

            // --- DATA SYNC LOGIC ---
            useEffect(() => {
                // CRITICAL: Guard against unauthenticated access
                if (!isFirebaseConfigured || !user) {
                    if (!isFirebaseConfigured || authError) {
                        // Fallback/Local data if offline or auth failed
                         if (thoughts.length === 0) setThoughts([{id: 1, text: "Running in Local Mode. (Database unconnected)", date: new Date().toLocaleDateString()}]);
                    }
                    return;
                }

                // USE SHARED PATH FOR SYNC
                const collections = [
                    { name: 'thoughts', setter: setThoughts, order: 'desc' },
                    { name: 'projects', setter: setProjects, order: 'desc' },
                    { name: 'goals', setter: setGoals, order: 'desc' },
                    { name: 'library', setter: setBooks, order: 'desc' },
                    { name: 'brainstorm_notes', setter: setNotes, order: 'asc' }
                ];

                const unsubscribes = collections.map(col => {
                    const q = query(
                        collection(db, 'artifacts', appId, 'users', SHARED_USER_ID, col.name),
                        orderBy('createdAt', col.order === 'desc' ? 'desc' : 'asc')
                    );
                    
                    return onSnapshot(q, (snapshot) => {
                        const data = snapshot.docs.map(doc => ({
                            id: doc.id,
                            ...doc.data()
                        }));
                        col.setter(data);
                    }, (error) => console.error(`Error fetching ${col.name}:`, error));
                });

                return () => unsubscribes.forEach(unsub => unsub());
            }, [user, authError]);

            // Data Handlers
            const handleAddThought = async (text) => {
                if (!text.trim()) return;
                if (isFirebaseConfigured && user) {
                    await addDoc(collection(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'thoughts'), {
                        text, date: new Date().toLocaleDateString(), createdAt: serverTimestamp()
                    });
                } else {
                    setThoughts([{id: Date.now(), text, date: new Date().toLocaleDateString()}, ...thoughts]);
                }
                setNoteInput('');
            };
            
            const handleDeleteThought = async (id) => {
                if (isFirebaseConfigured && user) await deleteDoc(doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'thoughts', id));
                else setThoughts(thoughts.filter(t => t.id !== id));
            };

            const handleAddProject = async (title, deadlineDate) => {
                const newProject = { title, category: "General", status: "Active", progress: 0, deadline: deadlineDate ? new Date(deadlineDate).toISOString() : new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), color: "text-zinc-500", createdAt: serverTimestamp() };
                if (isFirebaseConfigured && user) await addDoc(collection(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'projects'), newProject);
                else setProjects([ {id: Date.now(), ...newProject}, ...projects]);
            };
            
            const handleUpdateProject = async (id, updates) => {
                if (isFirebaseConfigured && user) await updateDoc(doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'projects', id), updates);
                else setProjects(projects.map(p => p.id === id ? { ...p, ...updates } : p));
            };
            
            const handleDeleteProject = async (id) => {
                if (isFirebaseConfigured && user) await deleteDoc(doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'projects', id));
                else setProjects(projects.filter(p => p.id !== id));
            };

            const handleAddGoal = async (goal) => {
                 if (isFirebaseConfigured && user) await addDoc(collection(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'goals'), { ...goal, createdAt: serverTimestamp() });
                 else setGoals([...goals, { id: Date.now(), ...goal }]);
            };
            const handleUpdateGoal = async (id, updates) => {
                 if (isFirebaseConfigured && user) await updateDoc(doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'goals', id), updates);
                 else setGoals(goals.map(g => g.id === id ? { ...g, ...updates } : g));
            };

            const handleAddNote = async (note) => {
                if (isFirebaseConfigured && user) await addDoc(collection(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'brainstorm_notes'), { ...note, createdAt: serverTimestamp() });
                else setNotes([...notes, { id: Date.now(), ...note }]);
            };
            
            const handleUpdateNote = async (id, updates) => {
                if (isFirebaseConfigured && user) await updateDoc(doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'brainstorm_notes', id), updates);
                else setNotes(notes.map(n => n.id === id ? { ...n, ...updates } : n));
            };
            
            const handleDeleteNote = async (id) => {
                 if (isFirebaseConfigured && user) await deleteDoc(doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'brainstorm_notes', id));
                 else setNotes(notes.filter(n => n.id !== id));
            };

            const handleAddBook = async (book) => {
                if (isFirebaseConfigured && user) await addDoc(collection(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'library'), { ...book, createdAt: serverTimestamp() });
                else setBooks([...books, { id: Date.now(), ...book }]);
            };
            
            const handleUpdateBook = async (id, updates) => {
                if (isFirebaseConfigured && user) await updateDoc(doc(db, 'artifacts', appId, 'users', SHARED_USER_ID, 'library', id), updates);
                else setBooks(books.map(b => b.id === id ? { ...b, ...updates } : b));
            };

            if (isLocked) return React.createElement(LoginScreen, { onLogin: () => setIsLocked(false), isConnected: isFirebaseConfigured && !!user });

            const SidebarContent = () => (
                React.createElement(React.Fragment, null,
                    React.createElement("div", { className: "flex items-center gap-3 mb-10 px-2" },
                        React.createElement("div", { className: "w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white shadow-indigo-500/20 shadow-lg" }, React.createElement(Brain, { size: 18 })),
                        React.createElement("h1", { className: "text-xl font-bold tracking-tight" }, "Kaizen OS")
                    ),
                    React.createElement("nav", { className: "space-y-2 flex-1" },
                        React.createElement(NavItem, { icon: Layout, label: "Dashboard", active: activeTab === 'dashboard', onClick: () => { setActiveTab('dashboard'); setMobileMenuOpen(false); } }),
                        React.createElement(NavItem, { icon: MessageSquare, label: "Thoughts", active: activeTab === 'thoughts', onClick: () => { setActiveTab('thoughts'); setMobileMenuOpen(false); } }),
                        React.createElement(NavItem, { icon: Target, label: "Goals", active: activeTab === 'goals', onClick: () => { setActiveTab('goals'); setMobileMenuOpen(false); } }),
                        React.createElement(NavItem, { icon: Layers, label: "Projects", active: activeTab === 'projects', onClick: () => { setActiveTab('projects'); setMobileMenuOpen(false); } }),
                        React.createElement(NavItem, { icon: Lightbulb, label: "Brainstorm", active: activeTab === 'brainstorm', onClick: () => { setActiveTab('brainstorm'); setMobileMenuOpen(false); } }),
                        React.createElement(NavItem, { icon: PlayCircle, label: "Entertainment", active: activeTab === 'entertainment', onClick: () => { setActiveTab('entertainment'); setMobileMenuOpen(false); } }),
                        React.createElement(NavItem, { icon: BookOpen, label: "Library", active: activeTab === 'library', onClick: () => { setActiveTab('library'); setMobileMenuOpen(false); } }),
                        React.createElement(NavItem, { icon: CalendarIcon, label: "Schedule", active: activeTab === 'schedule', onClick: () => { setActiveTab('schedule'); setMobileMenuOpen(false); } })
                    ),
                    React.createElement("div", { className: "pt-6 border-t border-zinc-200 dark:border-zinc-800 space-y-2" },
                        React.createElement("button", { onClick: () => setDarkMode(!darkMode), className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 transition-colors" },
                            React.createElement(darkMode ? Sun : Moon, { size: 20 }),
                            React.createElement("span", { className: "font-medium" }, darkMode ? "Light Mode" : "Dark Mode")
                        ),
                        React.createElement("button", { onClick: () => setIsLocked(true), className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors" },
                            React.createElement(LogOut, { size: 20 }),
                            React.createElement("span", { className: "font-medium" }, "Lock System")
                        )
                    )
                )
            );

            return React.createElement("div", { className: "min-h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 transition-colors duration-300 font-sans selection:bg-indigo-500/30" },
                // Desktop Sidebar
                React.createElement("aside", { className: "fixed left-0 top-0 h-full w-64 border-r border-zinc-200 dark:border-zinc-800 bg-white/50 dark:bg-zinc-950/50 backdrop-blur-xl p-6 hidden md:flex flex-col z-20" },
                    React.createElement(SidebarContent)
                ),
                
                // Mobile Sidebar Overlay & Drawer
                mobileMenuOpen && React.createElement("div", { className: "fixed inset-0 z-50 md:hidden" },
                    React.createElement("div", { className: "absolute inset-0 bg-black/50 backdrop-blur-sm", onClick: () => setMobileMenuOpen(false) }),
                    React.createElement("aside", { className: "absolute left-0 top-0 h-full w-64 bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 p-6 flex flex-col shadow-2xl animate-in slide-in-from-left duration-300" },
                        React.createElement(SidebarContent)
                    )
                ),

                // Main Content
                React.createElement("main", { className: "md:ml-64 p-4 md:p-12 max-w-7xl mx-auto" },
                    React.createElement("header", { className: "flex justify-between md:justify-end items-center mb-6" },
                        // Mobile Menu Toggle
                        React.createElement("button", { onClick: () => setMobileMenuOpen(true), className: "md:hidden p-2 text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100" },
                            React.createElement(Menu, { size: 24 })
                        ),

                        React.createElement("div", { className: "flex items-center gap-4" },
                            React.createElement("div", { className: "relative hidden sm:block" },
                                React.createElement(Search, { className: "absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400", size: 16 }),
                                React.createElement("input", { type: "text", placeholder: "Search your brain...", className: "pl-10 pr-4 py-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-full text-sm w-64 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all" })
                            ),
                            React.createElement("div", { className: "w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold border border-indigo-200 dark:border-indigo-800" }, "KZ")
                        )
                    ),
                    activeTab === 'dashboard' && React.createElement(DashboardView, { noteInput, setNoteInput, onSaveNote: handleAddThought, recentThoughts: thoughts.slice(0,3), projects }),
                    activeTab === 'thoughts' && React.createElement(ThoughtsView, { thoughts, onDeleteThought: handleDeleteThought }),
                    activeTab === 'projects' && React.createElement(ProjectsView, { projects, onAddProject: handleAddProject, onUpdateProject: handleUpdateProject, onDeleteProject: handleDeleteProject }),
                    activeTab === 'schedule' && React.createElement(ScheduleView),
                    activeTab === 'brainstorm' && React.createElement(BrainstormView, { notes, onAddNote: handleAddNote, onUpdateNote: handleUpdateNote, onDeleteNote: handleDeleteNote }),
                    activeTab === 'goals' && React.createElement(GoalsView, { goals, onUpdateGoal: handleUpdateGoal, onAddGoal: handleAddGoal }),
                    activeTab === 'library' && React.createElement(LibraryView, { books, onAddBook: handleAddBook, onUpdateBook: handleUpdateBook }),
                    activeTab === 'entertainment' && React.createElement(EntertainmentView),
                    !['dashboard', 'schedule', 'brainstorm', 'goals', 'library', 'entertainment', 'thoughts', 'projects'].includes(activeTab) && React.createElement("div", { className: "flex flex-col items-center justify-center h-[60vh] text-zinc-400" },
                        React.createElement("div", { className: "w-16 h-16 bg-zinc-100 dark:bg-zinc-900 rounded-2xl flex items-center justify-center mb-4" }, React.createElement(PenTool, { size: 32 })),
                        React.createElement("h3", { className: "text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-2" }, "Work in Progress"),
                        React.createElement("p", null, "This room is currently under construction.")
                    )
                )
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
