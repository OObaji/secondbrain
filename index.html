<!DOCTYPE html>
<html lang="en" class="overflow-x-hidden">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LifeOS - Second Brain</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        zinc: {
                            850: '#1f1f22',
                            950: '#09090b',
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        body { 
            -webkit-font-smoothing: antialiased; 
            touch-action: manipulation;
        }
        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #52525b; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #71717a; }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .animate-shake {
            animation: shake 0.2s ease-in-out 2;
        }
        .landing-gradient {
            background: linear-gradient(135deg, #09090b 0%, #18181b 100%);
        }
        .timer-progress {
            transition: stroke-dashoffset 1s linear;
        }
    </style>
</head>
<body class="bg-zinc-950 text-zinc-100 min-h-screen overflow-y-auto">
    <div id="root"></div>

    <!-- Application Logic -->
    <script type="module">
        import React, { useState, useEffect, useRef } from "https://esm.sh/react@18.2.0";
        import { createRoot } from "https://esm.sh/react-dom@18.2.0/client";
        import { 
            Layout, Home, BookOpen, Target, PenTool, Settings, Search, Bell, Plus, 
            MoreHorizontal, CheckCircle2, Clock, ArrowRight, Brain, Layers, 
            Calendar as CalendarIcon, ChevronRight, Sun, Moon, Filter, Zap, Coffee, 
            Video, MapPin, RefreshCw, MoreVertical, Lightbulb, Sparkles, Trash2, 
            Sprout, Briefcase, DollarSign, Move, Eraser, Palette, MousePointer2, 
            Trophy, Flag, TrendingUp, Award, Crosshair, Star, Bookmark, Book, 
            GraduationCap, Wallet, Building, Users, ExternalLink, Link as LinkIcon, 
            PlayCircle, Film, Music, Gamepad2, MonitorPlay, Headphones, Tv, 
            MessageSquare, AlertCircle, Folder, Minus, CalendarDays, LogOut, Lock, 
            Fingerprint, Delete, KeyRound, ShieldQuestion, RotateCcw, Menu, X, Save, Edit3, Wifi, WifiOff, Database,
            Timer, Play, Pause, Wrench, File, CreditCard, Coins, Heart, Activity, Scissors, Share2, Mail, Archive, Image,
            Cloud, CloudRain, CloudSun, CloudSnow, CloudLightning, Thermometer,
            List, Grid, Columns, Utensils, FileText, Trash, ShieldAlert, Flame, Volume2, ChevronLeft,
            ListTodo, ArrowUpRight, CheckSquare, Flower2, Dumbbell, Github, Bot, Newspaper, QrCode,
            Waves, Wind, Mountain, Footprints, Ban, ShieldCheck, Milestone, User, LogIn, ArrowLeft, Info,
            Eye, EyeOff
        } from "https://esm.sh/lucide-react@0.344.0?deps=react@18.2.0";

        // --- FIREBASE IMPORTS ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { 
            getAuth, 
            signInWithCustomToken, 
            signInAnonymously, 
            onAuthStateChanged, 
            signOut,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            GoogleAuthProvider,
            signInWithPopup
        } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, collection, doc, onSnapshot, addDoc, updateDoc, deleteDoc, query, orderBy, serverTimestamp, setDoc, getDoc, writeBatch } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // --- CONFIGURATION ---
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "", 
            authDomain: "secondbrain-8d8cd.firebaseapp.com",
            projectId: "secondbrain-8d8cd",
            storageBucket: "secondbrain-8d8cd.firebasestorage.app",
            messagingSenderId: "1913632272",
            appId: "1:1913632272:web:324f366a35e6dd07cffc95"
        };
        
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'kaizen-os-prod';
        
        // Initialize Firebase
        let app, auth, db;
        let isFirebaseConfigured = false;
        
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            isFirebaseConfigured = true;
        } catch (e) {
            console.warn("Firebase Init Error:", e);
        }

        // --- LOCAL AUTH SIMULATION ---
        const LocalAuth = {
            login: (email, password) => {
                const users = JSON.parse(localStorage.getItem('lifeos_local_db_users') || '{}');
                const user = users[email.toLowerCase()];
                if (!user) throw new Error("User not found locally. Please create an account.");
                if (user.password !== password) throw new Error("Incorrect password.");
                return { email: user.email, uid: user.uid, isLocal: true, displayName: user.displayName || user.email.split('@')[0] };
            },
            signup: (email, password) => {
                const users = JSON.parse(localStorage.getItem('lifeos_local_db_users') || '{}');
                if (users[email.toLowerCase()]) throw new Error("Account already exists. Please sign in.");
                
                const uid = 'local_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                const displayName = email.split('@')[0];
                users[email.toLowerCase()] = { email, password, uid, displayName };
                localStorage.setItem('lifeos_local_db_users', JSON.stringify(users));
                
                return { email, uid, isLocal: true, displayName };
            }
        };

        // --- DEFAULT TOOLS DATA ---
        const DEFAULT_TOOLS = [
            { id: 't1', category: 'Productivity HQ', name: 'ChatGPT', url: 'https://chat.openai.com/', icon: 'Bot' },
            { id: 't2', category: 'Productivity HQ', name: 'Notion', url: 'https://www.notion.so/', icon: 'Layers' },
            { id: 't3', category: 'Productivity HQ', name: 'G-Cal', url: 'https://calendar.google.com/', icon: 'CalendarIcon' },
            { id: 't4', category: 'Dev & Career', name: 'GitHub', url: 'https://github.com/', icon: 'Github' },
            { id: 't5', category: 'Dev & Career', name: 'LinkedIn', url: 'https://www.linkedin.com/', icon: 'Users' },
            { id: 't6', category: 'Finance', name: 'TradingView', url: 'https://www.tradingview.com/', icon: 'TrendingUp' },
            { id: 't7', category: 'Finance', name: 'Wise', url: 'https://wise.com/', icon: 'RefreshCw' },
            { id: 't8', category: 'Utilities', name: 'Speedtest', url: 'https://www.speedtest.net/', icon: 'Wifi' },
            { id: 't9', category: 'Utilities', name: 'WeTransfer', url: 'https://wetransfer.com/', icon: 'Share2' }
        ];

        // --- DATA CONSTANTS ---
        const DEFAULT_GOALS_DATA = {
            mission: "Reshape my life by achieving financial stability, building iron discipline, and gaining clear direction for my future.",
            phases: {
                phase1: [
                    { id: 'p1_1', text: "Clear unsecured debt (£0)", completed: false },
                    { id: 'p1_2', text: "School fees paid in full", completed: false },
                    { id: 'p1_3', text: "Expenses minimized (Survival mode)", completed: false }
                ],
                phase2: [
                    { id: 'p2_1', text: "Consistent Wake/Sleep (21 days)", completed: false },
                    { id: 'p2_2', text: "Established Prayer & Word Routine", completed: false },
                    { id: 'p2_3', text: "Deep Work System Installed", completed: false }
                ],
                phase3: [
                    { id: 'p3_1', text: "High-Income Skill Mastered", completed: false },
                    { id: 'p3_2', text: "3+ Portfolio Projects Built", completed: false },
                    { id: 'p3_3', text: "Secure Grad Role/Business", completed: false }
                ]
            },
            quarters: {
                q1: [
                    { id: 'q1_1', text: "Establish strict yearly budget (Separate from debt)", completed: false },
                    { id: 'q1_2', text: "Keep sleep schedule consistent", completed: false },
                    { id: 'q1_3', text: "Complete Web Innovation Project", completed: false },
                    { id: 'q1_4', text: "Complete Dissertation Log 2 & 3", completed: false },
                    { id: 'q1_5', text: "Complete Machine Learning Project", completed: false },
                    { id: 'q1_6', text: "Study & Sit for Cyber Security Exam", completed: false },
                    { id: 'q1_7', text: "Start & Lock-in Dissertation", completed: false },
                    { id: 'q1_8', text: "Pay towards Tuition Fees", completed: false },
                    { id: 'q1_9', text: "Get someone to take over tenancy for Liverpool apartment", completed: false },
                    { id: 'q1_10', text: "Never miss a workout session (4 days weekly)", completed: false },
                    { id: 'q1_11', text: "Never miss morning run", completed: false },
                    { id: 'q1_12', text: "Add a database to LifeOS app", completed: false },
                    { id: 'q1_13', text: "Master systems (Journal, LifeOS, Calendar, Fitness)", completed: false },
                    { id: 'q1_14', text: "Daily Bible & Prayer (Even 1 verse counts)", completed: false }
                ],
                q2: [],
                q3: [],
                q4: []
            },
            execution: {
                weekly: [
                    { id: 'w1', text: "Income Action (Extra Shift/Task)", completed: false },
                    { id: 'w2', text: "5-10 Hours Skill Acquisition", completed: false },
                    { id: 'w3', text: "Sunday Sermon & Study", completed: false },
                    { id: 'w4', text: "4-6 Workouts (Hypertrophy)", completed: false },
                    { id: 'w5', text: "Sunday Review (15 Mins)", completed: false }
                ],
                daily: [
                    { id: 'd1', text: "Wake & Sleep Consistent", completed: false },
                    { id: 'd2', text: "Pray Morning & Night (2x)", completed: false },
                    { id: 'd3', text: "Bible & Sermon (30m)", completed: false },
                    { id: 'd4', text: "Train or Move Body", completed: false },
                    { id: 'd5', text: "Night Reflection (The 'Why')", completed: false }
                ]
            }
        };

        const DEFAULT_MEALS = [
            { day: 'Monday', type: 'Breakfast', text: 'Oats + milk\n1 banana\n1 scoop protein powder' },
            { day: 'Monday', type: 'Lunch', text: 'Chicken stew\nWhite rice\n½ avocado' },
            { day: 'Monday', type: 'Snack', text: 'Greek yoghurt + apple' },
            { day: 'Monday', type: 'Dinner', text: 'Spaghetti + grilled chicken breast\n(Night: Milo + milk)' },
            { day: 'Tuesday', type: 'Breakfast', text: '3 eggs (boiled/scrambled)\nBread + peanut butter\nGrapes' },
            { day: 'Tuesday', type: 'Lunch', text: 'Jollof rice\nChicken thigh' },
            { day: 'Tuesday', type: 'Snack', text: 'Protein shake' },
            { day: 'Tuesday', type: 'Dinner', text: 'Sardines\nBoiled potatoes' },
            { day: 'Wednesday', type: 'Breakfast', text: 'Cereal + milk\nBanana' },
            { day: 'Wednesday', type: 'Lunch', text: 'Chicken breast\nRice\nAvocado' },
            { day: 'Wednesday', type: 'Snack', text: 'Greek yoghurt + grapes' },
            { day: 'Wednesday', type: 'Dinner', text: 'Spaghetti + chicken stew' },
            { day: 'Thursday', type: 'Breakfast', text: 'Oats + milk\nApple\n1 scoop protein' },
            { day: 'Thursday', type: 'Lunch', text: 'Chicken stew\nRice' },
            { day: 'Thursday', type: 'Snack', text: 'Bread + peanut butter' },
            { day: 'Thursday', type: 'Dinner', text: 'Sardines\nPotatoes' },
            { day: 'Friday', type: 'Breakfast', text: '3 eggs\nBread + jam\nBanana' },
            { day: 'Friday', type: 'Lunch', text: 'Jollof rice\nChicken breast' },
            { day: 'Friday', type: 'Snack', text: 'Greek yoghurt' },
            { day: 'Friday', type: 'Dinner', text: 'Pasta + grilled chicken thigh' },
            { day: 'Saturday', type: 'Breakfast', text: 'Cereal + milk\nGrapes' },
            { day: 'Saturday', type: 'Lunch', text: 'Chicken thigh\nRice + avocado' },
            { day: 'Saturday', type: 'Snack', text: 'Protein shake' },
            { day: 'Saturday', type: 'Dinner', text: 'Eggs (omelette)\nBread' },
            { day: 'Sunday', type: 'Breakfast', text: 'Oats + milk\nBanana' },
            { day: 'Sunday', type: 'Lunch', text: 'Rice + sardines' },
            { day: 'Sunday', type: 'Snack', text: 'Greek yoghurt + apple' },
            { day: 'Sunday', type: 'Dinner', text: 'Chicken stew\nPotatoes' }
        ];

        const WORKOUT_PLAN = [
            { id: 'day1', title: "Day 1 – Chest & Triceps", icon: Flame, color: "text-orange-500", warmup: ["Light DB presses – 15 reps", "Arm circles"], exercises: [{ name: "DB Floor Press", sets: "4", reps: "8–12" }, { name: "DB Chest Fly", sets: "3", reps: "10–15" }, { name: "Neutral-grip DB Press", sets: "3", reps: "8–12" }, { name: "Overhead DB Tri Ext", sets: "3", reps: "10–15" }], finisher: "DB Floor Press hold – 3 × 30s" },
            { id: 'day2', title: "Day 2 – Legs (DB Only)", icon: Activity, color: "text-blue-500", warmup: ["Bodyweight squats – 20", "Leg swings"], exercises: [{ name: "Goblet Squats", sets: "4", reps: "10–15" }, { name: "DB RDLs", sets: "4", reps: "8–12" }, { name: "Walking Lunges", sets: "3", reps: "10/leg" }, { name: "DB Step-Ups", sets: "3", reps: "10/leg" }], finisher: "Goblet squat hold – 2 rounds" },
            { id: 'day3', title: "Day 3 – Shoulders & Arms", icon: Dumbbell, color: "text-emerald-500", warmup: ["Light DB raises", "Arm swings"], exercises: [{ name: "Seated DB Press", sets: "4", reps: "8–12" }, { name: "DB Lateral Raises", sets: "4", reps: "12–15" }, { name: "DB Front Raises", sets: "3", reps: "12" }, { name: "Alt DB Curls", sets: "3", reps: "10–12" }], finisher: "Lateral raise partials – 2 × 30s" },
            { id: 'day4', title: "Day 4 – Arms + Chest Pump", icon: Zap, color: "text-purple-500", subtitle: "Short, intense.", warmup: [], exercises: [{ name: "DB Floor Press", sets: "4", reps: "12–15" }, { name: "Squeeze Press", sets: "3", reps: "12" }, { name: "Concentration Curls", sets: "3", reps: "10/arm" }, { name: "21s DB Curls", sets: "2", reps: "rounds" }], finisher: "Curl → press combo" }
        ];

        const GYM_WORKOUT_PLAN = [
            {
                id: 'gym1',
                title: "Day 1: Chest & Triceps",
                icon: Flame,
                color: "text-rose-500",
                warmup: ["5min Treadmill", "Arm Circles", "Pushups"],
                exercises: [
                    { name: "Barbell Bench Press", sets: "4", reps: "8-10" },
                    { name: "Incline Dumbbell Press", sets: "3", reps: "10-12" },
                    { name: "Cable Flys", sets: "3", reps: "12-15" },
                    { name: "Tricep Rope Pushdowns", sets: "4", reps: "12-15" },
                    { name: "Skullcrushers (EZ Bar)", sets: "3", reps: "10-12" }
                ],
                finisher: "Pushup burnout (2 sets to failure)"
            },
            {
                id: 'gym2',
                title: "Day 2: Back & Biceps",
                icon: Activity,
                color: "text-blue-500",
                warmup: ["5min Rower", "Band Pull-aparts"],
                exercises: [
                    { name: "Lat Pulldowns (Wide)", sets: "4", reps: "10-12" },
                    { name: "Seated Cable Row", sets: "4", reps: "10-12" },
                    { name: "Single Arm DB Row", sets: "3", reps: "10/side" },
                    { name: "Barbell Bicep Curls", sets: "3", reps: "10-12" },
                    { name: "Hammer Curls", sets: "3", reps: "12" }
                ],
                finisher: "Face Pulls 3x15"
            },
            {
                id: 'gym3',
                title: "Day 3: Legs",
                icon: Dumbbell,
                color: "text-emerald-500",
                warmup: ["Bodyweight Squats", "Leg Swings"],
                exercises: [
                    { name: "Barbell Squats", sets: "4", reps: "6-8" },
                    { name: "Leg Press", sets: "3", reps: "10-12" },
                    { name: "Romanian Deadlifts", sets: "4", reps: "10" },
                    { name: "Leg Extensions", sets: "3", reps: "15" },
                    { name: "Seated Calf Raises", sets: "4", reps: "15-20" }
                ],
                finisher: "Walking Lunges (Bodyweight)"
            },
            {
                id: 'gym4',
                title: "Day 4: Shoulders & Abs",
                icon: Zap,
                color: "text-purple-500",
                warmup: ["Shoulder dislocations (stick)", "Light DB press"],
                exercises: [
                    { name: "Overhead Barbell Press", sets: "4", reps: "8-10" },
                    { name: "DB Lateral Raises", sets: "4", reps: "12-15" },
                    { name: "Front Plate Raise", sets: "3", reps: "12" },
                    { name: "Cable Crunches", sets: "4", reps: "15" },
                    { name: "Hanging Leg Raises", sets: "3", reps: "12" }
                ],
                finisher: "Plank (3 x 1 min)"
            }
        ];

        const HOME_WORKOUT_PLAN = WORKOUT_PLAN; // Reuse the DB only plan for Home

        const BIBLE_TOPICS = [
            { title: "Finance & Wealth", desc: "Stewardship & trust.", verses: ["Prov 22:7", "Matt 6:24"], chapters: ["Prov 3", "Matt 6"] },
            { title: "Overcoming Lust", desc: "Purity & self-control.", verses: ["2 Tim 2:22", "1 Cor 6:18"], chapters: ["Rom 6", "Ps 51"] },
            { title: "Power of Prayer", desc: "Communion with God.", verses: ["Phil 4:6", "1 Thess 5:17"], chapters: ["Luke 11", "Ps 145"] },
            { title: "Anxiety & Peace", desc: "Finding rest.", verses: ["1 Pet 5:7", "John 14:27"], chapters: ["Phil 4", "Ps 23"] },
            { title: "Diligence", desc: "Work unto the Lord.", verses: ["Col 3:23", "Prov 13:4"], chapters: ["Prov 6", "Eccl 3"] }
        ];

        const FOCUS_SOUNDS = [
            { id: 'rain', label: 'Rain', icon: CloudRain, url: 'https://assets.mixkit.co/active_storage/sfx/2515/2515-preview.mp3' },
            { id: 'forest', label: 'Forest', icon: CloudSun, url: 'https://assets.mixkit.co/active_storage/sfx/2511/2511-preview.mp3' },
            { id: 'fire', label: 'Fire', icon: Flame, url: 'https://assets.mixkit.co/active_storage/sfx/2513/2513-preview.mp3' },
            { id: 'cafe', label: 'Cafe', icon: Coffee, url: 'https://assets.mixkit.co/active_storage/sfx/96/96-preview.mp3' },
            { id: 'lofi', label: 'Lofi', icon: Music, url: 'https://cdn.pixabay.com/audio/2022/11/22/audio_febc508520.mp3' },
            { id: 'ocean', label: 'Ocean', icon: Waves, url: 'https://assets.mixkit.co/active_storage/sfx/1126/1126-preview.mp3' },
            { id: 'thunder', label: 'Thunder', icon: CloudLightning, url: 'https://assets.mixkit.co/active_storage/sfx/2507/2507-preview.mp3' }
        ];

        const DAILY_SPIRITUALITY = [
            { verse: "Joshua 1:9", text: "Be strong and courageous...", prayer: "Lord, grant me courage.", encouragement: "You are never alone." },
            { verse: "Jer 29:11", text: "Plans to prosper you...", prayer: "Help me trust Your timing.", encouragement: "Your future is bright." },
            { verse: "Isa 40:31", text: "Renew their strength...", prayer: "Renew my strength, Lord.", encouragement: "God is strengthening you." },
            { verse: "Rom 8:28", text: "All things work for good...", prayer: "Thank You for Your plan.", encouragement: "Setbacks are setups." },
            { verse: "Ps 46:10", text: "Be still...", prayer: "Quiet my thoughts.", encouragement: "Peace is His presence." }
        ];

        const BIBLE_BOOKS = [
            { category: "Foundations", books: [{ name: "Genesis", theme: "Beginnings", app: "Family & Legacy", keys: "Gen 1" }, { name: "Proverbs", theme: "Wisdom", app: "Finance & Habits", keys: "Prov 3" }] },
            { category: "Leadership", books: [{ name: "Joshua", theme: "Conquest", app: "Courage", keys: "Josh 1" }, { name: "Nehemiah", theme: "Rebuilding", app: "Management", keys: "Neh 1" }] },
            { category: "Gospels", books: [{ name: "Matthew", theme: "King", app: "Ethics", keys: "Matt 5" }, { name: "John", theme: "God", app: "Identity", keys: "John 1" }] },
            { category: "Letters", books: [{ name: "Romans", theme: "Gospel", app: "Mindset", keys: "Rom 8" }, { name: "James", theme: "Action", app: "Integrity", keys: "Jas 1" }] }
        ];

        // --- HELPERS ---
        const Card = ({ children, className = "", title, action }) => (
            React.createElement("div", { className: `bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-4 md:p-6 flex flex-col ${className}` },
                (title || action) && (
                    React.createElement("div", { className: "flex justify-between items-center mb-4" },
                        title && React.createElement("h3", { className: "text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider" }, title),
                        action
                    )
                ),
                children
            )
        );

        const NavItem = ({ icon: Icon, label, active, onClick }) => (
            React.createElement("button", { 
                onClick: onClick,
                className: `w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group ${active ? 'bg-zinc-900 text-white dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-200 dark:shadow-none' : 'text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800'}`
            },
                React.createElement(Icon, { size: 20, className: active ? '' : 'stroke-[2px]' }),
                React.createElement("span", { className: "font-medium" }, label),
                active && React.createElement(ChevronRight, { size: 16, className: "ml-auto opacity-50" })
            )
        );

        const QuickLinkButton = ({ href, icon: Icon, label, colorClass = "text-zinc-600 dark:text-zinc-300" }) => (
            React.createElement("a", { href: href, target: "_blank", rel: "noopener noreferrer", className: "flex flex-col items-center justify-center gap-2 p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950/50 border border-zinc-100 dark:border-zinc-800 hover:border-indigo-500/50 hover:bg-white dark:hover:bg-zinc-900 hover:shadow-md transition-all group text-center h-full" },
                React.createElement("div", { className: `w-8 h-8 rounded-full flex items-center justify-center bg-white dark:bg-zinc-900 shadow-sm group-hover:scale-110 transition-transform ${colorClass}` }, React.createElement(Icon, { size: 16 })),
                React.createElement("span", { className: "text-xs font-medium text-zinc-600 dark:text-zinc-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 line-clamp-1" }, label)
            )
        );

        // --- AUTH COMPONENT ---
        const AuthModal = ({ onClose, onLogin }) => {
            const [activeTab, setActiveTab] = useState("login"); // 'login' or 'signup'
            const [email, setEmail] = useState("");
            const [password, setPassword] = useState("");
            const [confirmPassword, setConfirmPassword] = useState("");
            const [showPassword, setShowPassword] = useState(false);
            const [error, setError] = useState(null);
            const [loading, setLoading] = useState(false);

            const isLogin = activeTab === "login";

            const handleSubmit = async (e) => {
                e.preventDefault(); setError(null); setLoading(true);
                
                if (!isLogin && password !== confirmPassword) {
                    setError("Passwords do not match."); setLoading(false); return;
                }

                try {
                    // Try real Firebase Auth first
                    if (isLogin) await signInWithEmailAndPassword(auth, email, password);
                    else await createUserWithEmailAndPassword(auth, email, password);
                    onLogin({ email, uid: auth.currentUser.uid, isLocal: false, displayName: email.split('@')[0] });
                    onClose();
                } catch (err) { 
                    console.warn("Auth Error caught, checking fallback...", err.code);
                    let msg = err.message.replace("Firebase: ", "");
                    
                    // FALLBACK TO LOCAL AUTH
                    try {
                        const localUser = isLogin 
                            ? LocalAuth.login(email, password)
                            : LocalAuth.signup(email, password);
                        onLogin(localUser);
                        onClose();
                        return;
                    } catch (localErr) {
                         setError(localErr.message); 
                    }
                } finally { setLoading(false); }
            };

            const handleGoogleLogin = async () => {
                 setLoading(true);
                 setTimeout(() => {
                     // Simulate a Google user
                     const user = { 
                         email: "demo.user@gmail.com", 
                         displayName: "Demo User",
                         uid: "google-local-" + Date.now(), 
                         isLocal: true 
                     };
                     onLogin(user);
                     onClose();
                     setLoading(false);
                 }, 500);
            };

            return React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200" },
                React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-8 max-w-sm w-full relative shadow-2xl" },
                    React.createElement("button", { onClick: onClose, className: "absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200" }, React.createElement(X, { size: 20 })),
                    
                    // Header with Tabs
                    React.createElement("div", { className: "text-center mb-6" },
                        React.createElement("div", { className: "w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mx-auto mb-3" }, React.createElement(LogIn, { size: 24 })),
                        React.createElement("div", { className: "flex justify-center gap-4 border-b border-zinc-100 dark:border-zinc-800 pb-2 mt-4" },
                            React.createElement("button", { onClick: () => { setActiveTab("login"); setError(null); }, className: `pb-2 text-sm font-bold transition-colors border-b-2 ${isLogin ? 'text-indigo-600 border-indigo-600' : 'text-zinc-400 border-transparent hover:text-zinc-600'}` }, "Sign In"),
                            React.createElement("button", { onClick: () => { setActiveTab("signup"); setError(null); }, className: `pb-2 text-sm font-bold transition-colors border-b-2 ${!isLogin ? 'text-indigo-600 border-indigo-600' : 'text-zinc-400 border-transparent hover:text-zinc-600'}` }, "Create Account")
                        )
                    ),

                    React.createElement("div", { className: "space-y-4" },
                        React.createElement("button", { onClick: handleGoogleLogin, disabled: loading, className: "w-full py-3 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-200 font-bold rounded-xl transition-colors flex items-center justify-center gap-2" }, 
                            React.createElement("img", { src: "https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg", className: "w-5 h-5", alt: "G" }), "Sign in with Google"
                        ),
                        React.createElement("div", { className: "relative flex py-2 items-center" }, React.createElement("div", { className: "flex-grow border-t border-zinc-200 dark:border-zinc-800" }), React.createElement("span", { className: "flex-shrink mx-4 text-xs text-zinc-400 uppercase" }, "Or"), React.createElement("div", { className: "flex-grow border-t border-zinc-200 dark:border-zinc-800" })),
                        React.createElement("form", { onSubmit: handleSubmit, className: "space-y-4" },
                            React.createElement("input", { type: "email", required: true, value: email, onChange: (e) => setEmail(e.target.value), placeholder: "Email", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-zinc-900 dark:text-zinc-100" }),
                            
                            // Password Field with Toggle
                            React.createElement("div", { className: "relative" },
                                React.createElement("input", { type: showPassword ? "text" : "password", required: true, value: password, onChange: (e) => setPassword(e.target.value), placeholder: "Password", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-zinc-900 dark:text-zinc-100 pr-10" }),
                                React.createElement("button", { type: "button", onClick: () => setShowPassword(!showPassword), className: "absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200" }, React.createElement(showPassword ? EyeOff : Eye, { size: 18 }))
                            ),

                            !isLogin && React.createElement("input", { type: "password", required: true, value: confirmPassword, onChange: (e) => setConfirmPassword(e.target.value), placeholder: "Confirm Password", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-zinc-900 dark:text-zinc-100" }),
                            
                            error && React.createElement("div", { className: "p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2" }, React.createElement(AlertCircle, { size: 16 }), error),
                            
                            React.createElement("button", { type: "submit", disabled: loading, className: "w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-colors disabled:opacity-50" }, loading ? "Processing..." : (isLogin ? "Sign In" : "Create Account"))
                        )
                    )
                )
            );
        };

        // --- LANDING PAGE ---
        const LandingPage = ({ onLoginSuccess, onGuestLogin }) => {
            const [activeTab, setActiveTab] = useState("login"); // 'login' or 'signup'
            const [email, setEmail] = useState("");
            const [password, setPassword] = useState("");
            const [confirmPassword, setConfirmPassword] = useState("");
            const [showPassword, setShowPassword] = useState(false);
            const [error, setError] = useState(null);
            const [loading, setLoading] = useState(false);

            const isLogin = activeTab === "login";

            const handleSubmit = async (e) => {
                e.preventDefault(); setError(null); setLoading(true);
                if (!isLogin && password !== confirmPassword) { setError("Passwords do not match."); setLoading(false); return; }

                try {
                    if (isLogin) await signInWithEmailAndPassword(auth, email, password);
                    else await createUserWithEmailAndPassword(auth, email, password);
                    onLoginSuccess({ email, uid: auth.currentUser.uid, isLocal: false, displayName: email.split('@')[0] });
                } catch (err) { 
                    console.warn("Auth Fallback (Landing):", err.code);
                    try {
                         const localUser = isLogin 
                             ? LocalAuth.login(email, password)
                             : LocalAuth.signup(email, password);
                         onLoginSuccess(localUser);
                         return;
                     } catch (localErr) {
                         setError(localErr.message);
                         setLoading(false);
                         return;
                     }
                } finally { setLoading(false); }
            };

            const handleGoogleLogin = async () => {
                // Simulate Google Login for Preview Environment
                setLoading(true);
                setTimeout(() => {
                    onLoginSuccess({ 
                        email: "demo.user@gmail.com", 
                        displayName: "Demo User",
                        uid: "google-local-" + Date.now(), 
                        isLocal: true 
                    });
                    setLoading(false);
                }, 800);
            };

            const handleGuest = () => {
                 onGuestLogin({ email: "guest@lifeos.app", displayName: "Guest", uid: "guest-user", isLocal: true });
            };

            return React.createElement("div", { className: "min-h-screen flex flex-col md:flex-row bg-zinc-950 text-white font-sans" },
                React.createElement("div", { className: "md:w-1/2 p-12 flex flex-col justify-between landing-gradient relative overflow-hidden" },
                    React.createElement("div", { className: "relative z-10" },
                        React.createElement("div", { className: "flex items-center gap-3 mb-8" },
                            React.createElement("div", { className: "w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center" }, React.createElement(Brain, { size: 24, className: "text-white" })),
                            React.createElement("h1", { className: "text-2xl font-bold tracking-tight" }, "LifeOS")
                        ),
                        React.createElement("h2", { className: "text-5xl md:text-6xl font-bold mb-6 leading-tight" }, "Your Second", React.createElement("br"), React.createElement("span", { className: "text-indigo-500" }, "Brain.")),
                        React.createElement("p", { className: "text-zinc-400 text-lg max-w-md leading-relaxed" }, "Organize your entire life. Master your habits. Achieve your 2026 vision. All in one place.")
                    ),
                    React.createElement("div", { className: "relative z-10 mt-12 grid grid-cols-2 gap-6" },
                        React.createElement("div", { className: "flex items-center gap-3 text-zinc-300" }, React.createElement(CheckCircle2, { className: "text-emerald-500" }), "Goal Tracking"),
                        React.createElement("div", { className: "flex items-center gap-3 text-zinc-300" }, React.createElement(CheckCircle2, { className: "text-blue-500" }), "Focus Timer"),
                        React.createElement("div", { className: "flex items-center gap-3 text-zinc-300" }, React.createElement(CheckCircle2, { className: "text-amber-500" }), "Daily Journal"),
                        React.createElement("div", { className: "flex items-center gap-3 text-zinc-300" }, React.createElement(CheckCircle2, { className: "text-indigo-500" }), "Habit Builder")
                    ),
                    React.createElement("div", { className: "absolute top-0 right-0 w-96 h-96 bg-indigo-600/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2" }),
                    React.createElement("div", { className: "absolute bottom-0 left-0 w-64 h-64 bg-rose-600/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2" })
                ),
                React.createElement("div", { className: "md:w-1/2 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 flex flex-col justify-center p-8 md:p-16" },
                    React.createElement("div", { className: "max-w-md w-full mx-auto" },
                        React.createElement("div", { className: "mb-8 text-center" },
                            React.createElement("h3", { className: "text-3xl font-bold mb-2" }, isLogin ? "Welcome Back" : "Create Account"),
                            React.createElement("p", { className: "text-zinc-500" }, isLogin ? "Enter your details to access your workspace." : "Start your journey to clarity today.")
                        ),
                        
                        React.createElement("div", { className: "space-y-4" },
                            React.createElement("button", { onClick: handleGoogleLogin, disabled: loading, className: "w-full py-3 mb-6 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-200 font-bold rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm" },
                                React.createElement("img", { src: "https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg", className: "w-5 h-5", alt: "G" }), "Continue with Google"
                            ),
                            React.createElement("div", { className: "relative flex py-2 items-center mb-6" },
                                React.createElement("div", { className: "flex-grow border-t border-zinc-200 dark:border-zinc-800" }),
                                React.createElement("span", { className: "flex-shrink mx-4 text-xs text-zinc-400 uppercase font-bold tracking-wider" }, "Or with Email"),
                                React.createElement("div", { className: "flex-grow border-t border-zinc-200 dark:border-zinc-800" })
                            ),
                            
                            // LANDING TABS
                            React.createElement("div", { className: "flex justify-center gap-6 border-b border-zinc-200 dark:border-zinc-800 pb-1 mb-4" },
                                React.createElement("button", { onClick: () => { setActiveTab("login"); setError(null); }, className: `pb-2 text-sm font-bold transition-colors border-b-2 ${isLogin ? 'text-indigo-600 border-indigo-600' : 'text-zinc-400 border-transparent hover:text-zinc-600'}` }, "Sign In"),
                                React.createElement("button", { onClick: () => { setActiveTab("signup"); setError(null); }, className: `pb-2 text-sm font-bold transition-colors border-b-2 ${!isLogin ? 'text-indigo-600 border-indigo-600' : 'text-zinc-400 border-transparent hover:text-zinc-600'}` }, "Create Account")
                            ),

                            React.createElement("form", { onSubmit: handleSubmit, className: "space-y-4" },
                                React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold text-zinc-500 uppercase mb-1 ml-1" }, "Email Address"), React.createElement("input", { type: "email", required: true, value: email, onChange: (e) => setEmail(e.target.value), placeholder: "name@example.com", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all text-zinc-900 dark:text-zinc-100" })),
                                
                                // Password Field with Toggle
                                React.createElement("div", null,
                                    React.createElement("label", { className: "block text-xs font-bold text-zinc-500 uppercase mb-1 ml-1" }, "Password"),
                                    React.createElement("div", { className: "relative" },
                                        React.createElement("input", { type: showPassword ? "text" : "password", required: true, value: password, onChange: (e) => setPassword(e.target.value), placeholder: "••••••••", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all text-zinc-900 dark:text-zinc-100 pr-10" }),
                                        React.createElement("button", { type: "button", onClick: () => setShowPassword(!showPassword), className: "absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200" }, React.createElement(showPassword ? EyeOff : Eye, { size: 18 }))
                                    )
                                ),

                                !isLogin && React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold text-zinc-500 uppercase mb-1 ml-1" }, "Confirm Password"), React.createElement("input", { type: "password", required: true, value: confirmPassword, onChange: (e) => setConfirmPassword(e.target.value), placeholder: "••••••••", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all text-zinc-900 dark:text-zinc-100" })),
                                
                                error && React.createElement("div", { className: "p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2" }, React.createElement(AlertCircle, { size: 16 }), error),
                                
                                React.createElement("button", { type: "submit", disabled: loading, className: "w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed mt-2" }, loading ? "Processing..." : (isLogin ? "Sign In" : "Create Account"))
                            ),
                            React.createElement("div", { className: "mt-6 text-center" },
                                React.createElement("button", { onClick: handleGuest, disabled: loading, className: "text-xs text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors uppercase tracking-wider font-bold" }, "Continue as Guest")
                            )
                        )
                    )
                )
            );
        };

        // --- WIDGETS ---
        const WeatherWidget = () => {
            const [weather, setWeather] = useState(null);
            useEffect(() => {
                const fetchWeather = async (lat, lon) => {
                    try {
                        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code`);
                        const data = await res.json(); setWeather(data);
                    } catch(e) {}
                };
                if (navigator.geolocation) navigator.geolocation.getCurrentPosition(p => fetchWeather(p.coords.latitude, p.coords.longitude), () => fetchWeather(53.48, -2.24));
                else fetchWeather(53.48, -2.24);
            }, []);
            if (!weather) return React.createElement("div", { className: "animate-pulse h-10 w-24 bg-zinc-100 dark:bg-zinc-800 rounded" });
            return React.createElement("div", { className: "flex flex-col items-end" }, 
                React.createElement("span", { className: "text-xl font-bold" }, `${Math.round(weather.current.temperature_2m)}°C`),
                React.createElement("span", { className: "text-xs text-zinc-500" }, "Local Area")
            );
        };

        const TimeWidget = () => {
            const [time, setTime] = useState(new Date());
            useEffect(() => { const t = setInterval(() => setTime(new Date()), 1000); return () => clearInterval(t); }, []);
            return React.createElement("div", { className: "text-right" },
                React.createElement("div", { className: "text-3xl font-bold font-mono tracking-tight" }, time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })),
                React.createElement("div", { className: "text-xs font-medium text-zinc-500 uppercase" }, time.toLocaleDateString(undefined, { weekday: 'long', month: 'long', day: 'numeric' }))
            );
        };

        const CompactTimer = ({ timerState, toggleTimer, resetTimer }) => {
            const format = (s) => `${Math.floor(s / 60).toString().padStart(2,'0')}:${(s % 60).toString().padStart(2,'0')}`;
            return React.createElement("div", { className: "flex items-center gap-4 bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-xl p-3" },
                React.createElement("div", { className: "font-mono text-2xl font-bold text-indigo-600 dark:text-indigo-400 w-20 text-center" }, format(timerState.timeLeft)),
                React.createElement("div", { className: "flex gap-2" },
                    React.createElement("button", { onClick: toggleTimer, className: "p-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 transition-colors" }, 
                        timerState.isActive ? React.createElement(Pause, { size: 16 }) : React.createElement(Play, { size: 16 })
                    ),
                    React.createElement("button", { onClick: resetTimer, className: "p-2 rounded-lg bg-zinc-200 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-colors" }, 
                        React.createElement(RotateCcw, { size: 16 })
                    )
                )
            );
        };

        // --- VIEWS DEFINITIONS (MUST BE BEFORE APP) ---

        const DashboardView = ({ onNavigate, meals = [], tasks = [], dashboardData, onUpdateDashboard, onAddDump, timerState, toggleTimer, resetTimer, worries = [], goalsData }) => {
            const dailyFocus = dashboardData?.focus || "";
            const [isEditing, setIsEditing] = useState(!dailyFocus);
            const [focusInput, setFocusInput] = useState(dailyFocus);
            const [quickNote, setQuickNote] = useState("");
            const [quote, setQuote] = useState({ text: "Focus is about saying no.", author: "Steve Jobs" });
            
            useEffect(() => {
                if (dailyFocus) {
                    setFocusInput(dailyFocus);
                    setIsEditing(false);
                }
            }, [dailyFocus]);

            const handleSetFocus = () => { if (focusInput.trim()) { onUpdateDashboard({ ...dashboardData, focus: focusInput }); setIsEditing(false); } };
            const handleQuickCapture = () => { if (quickNote.trim()) { onAddDump(quickNote); setQuickNote(""); } };
            const handleEditFocus = () => { setFocusInput(dailyFocus); setIsEditing(true); };

            // --- WIDGET LOGIC ---
            
            // 1. Tasks
            const doFirstTasks = tasks.filter(t => t.category === 'do_first' && !t.completed).slice(0, 3);
            
            // 2. Habits
            const habits = dashboardData?.habits || [
                { id: 1, label: "Pray", completed: false, icon: Heart },
                { id: 2, label: "Read", completed: false, icon: BookOpen },
                { id: 3, label: "Sweat", completed: false, icon: Activity },
                { id: 4, label: "Journal", completed: false, icon: PenTool }
            ];
            const toggleHabit = (id) => {
                const updatedHabits = habits.map(h => h.id === id ? { ...h, completed: !h.completed } : h);
                onUpdateDashboard({ ...dashboardData, habits: updatedHabits });
            };

            // 3. Date & Time Context
            const now = new Date();
            const hour = now.getHours();
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const todayName = days[now.getDay()];
            const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);

            // 4. Meal Logic (Next Meal)
            let mealType = 'Snack';
            if (hour < 11) mealType = 'Breakfast';
            else if (hour < 15) mealType = 'Lunch';
            else if (hour < 21) mealType = 'Dinner';
            
            const currentMeal = meals.find(m => m.day === todayName && m.type === mealType);
            const defaultMeal = DEFAULT_MEALS.find(m => m.day === todayName && m.type === mealType);
            const mealDisplay = currentMeal ? currentMeal.text : (defaultMeal ? defaultMeal.text : "No plan set");

            // 5. Workout Logic (Based on Gym Split)
            const workoutSchedule = {
                'Monday': 'Chest & Triceps',
                'Tuesday': 'Back & Biceps',
                'Wednesday': 'Legs & Calves',
                'Thursday': 'Shoulders & Abs',
                'Friday': 'Arms & Pump',
                'Saturday': 'Active Recovery',
                'Sunday': 'Rest & Stretch'
            };
            const todaysWorkout = workoutSchedule[todayName];

            // 6. Spirituality
            const dailySpirit = DAILY_SPIRITUALITY[dayOfYear % DAILY_SPIRITUALITY.length];

            // 7. Goals Pulse
            const goalKeys = goalsData?.quarters?.q1 ? goalsData.quarters.q1 : [];
            const completedGoals = goalKeys.filter(g => g.completed).length;
            const totalGoals = goalKeys.length || 1; // avoid div by 0
            const goalPercentage = Math.round((completedGoals / totalGoals) * 100);

            return React.createElement("div", { className: "animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                // Header
                React.createElement("div", { className: "mb-8 flex items-end justify-between" },
                    React.createElement("div", null, React.createElement("h2", { className: "text-xl font-bold text-zinc-400 mb-2 uppercase tracking-widest" }, "My Dashboard"), React.createElement(WeatherWidget)),
                    React.createElement(TimeWidget)
                ),
                
                // MAIN INTENTION CARD
                React.createElement(Card, { className: "mb-6 relative overflow-hidden min-h-[140px] flex flex-col justify-center border-l-4 border-l-indigo-500" },
                    React.createElement("div", { className: "absolute top-0 right-0 w-64 h-64 bg-indigo-500/5 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none" }),
                    React.createElement("div", { className: "relative z-10 w-full" },
                        React.createElement("div", { className: "flex justify-between items-center mb-2" },
                            React.createElement("h3", { className: "text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2" }, React.createElement(Target, { size: 14 }), "Today's One Thing"),
                            !isEditing && React.createElement("button", { onClick: handleEditFocus, className: "text-zinc-400 hover:text-indigo-500" }, React.createElement(Edit3, { size: 14 }))
                        ),
                        isEditing ? (
                            React.createElement("div", { className: "flex gap-2" },
                                React.createElement("input", { type: "text", value: focusInput, onChange: (e) => setFocusInput(e.target.value), onKeyDown: (e) => e.key === 'Enter' && handleSetFocus(), placeholder: "Win the day by...", className: "w-full bg-transparent border-b-2 border-zinc-200 dark:border-zinc-700 text-2xl font-bold focus:outline-none py-1 text-zinc-900 dark:text-zinc-100" }),
                                React.createElement("button", { onClick: handleSetFocus, disabled: !focusInput.trim(), className: "p-2 bg-indigo-600 text-white rounded-lg" }, React.createElement(ArrowRight, { size: 20 }))
                            )
                        ) : (
                            React.createElement("h2", { className: "text-3xl md:text-4xl font-bold text-indigo-600 dark:text-indigo-400 leading-tight truncate" }, dailyFocus || "Set your intention...")
                        )
                    )
                ),

                // WIDGET GRID
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6" },
                    // 1. Spirituality Widget
                    React.createElement(Card, { title: "Soul Food", className: "bg-amber-50/50 dark:bg-amber-900/10 border-amber-100 dark:border-amber-900/20" },
                        React.createElement("div", { className: "flex flex-col h-full justify-between" },
                            React.createElement("p", { className: "text-sm font-medium text-zinc-800 dark:text-zinc-200 italic" }, `"${dailySpirit.verse}"`),
                            React.createElement("button", { onClick: () => onNavigate('spirituality'), className: "text-xs font-bold text-amber-600 dark:text-amber-400 mt-2 flex items-center gap-1" }, "Read Devotional", React.createElement(ArrowRight, { size: 10 }))
                        )
                    ),
                    // 2. Fitness Widget
                    React.createElement(Card, { title: "Physical Prep", className: "bg-orange-50/50 dark:bg-orange-900/10 border-orange-100 dark:border-orange-900/20" },
                        React.createElement("div", { className: "flex items-center gap-3 mb-2" },
                            React.createElement("div", { className: "p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600" }, React.createElement(Dumbbell, { size: 16 })),
                            React.createElement("span", { className: "text-sm font-bold text-zinc-700 dark:text-zinc-200" }, todayName)
                        ),
                        React.createElement("p", { className: "text-lg font-bold text-zinc-900 dark:text-zinc-100" }, todaysWorkout),
                        React.createElement("button", { onClick: () => onNavigate('fitness'), className: "text-xs text-orange-600 dark:text-orange-400 mt-1" }, "View Routine")
                    ),
                    // 3. Food Widget
                    React.createElement(Card, { title: "Body Fuel" },
                         React.createElement("div", { className: "flex items-center justify-between mb-1" },
                             React.createElement("span", { className: "text-xs font-bold uppercase text-zinc-400" }, mealType),
                             React.createElement(Utensils, { size: 14, className: "text-emerald-500" })
                         ),
                         React.createElement("p", { className: "text-sm font-medium text-zinc-700 dark:text-zinc-200 line-clamp-2" }, mealDisplay)
                    ),
                    // 4. Goals Pulse Widget
                    React.createElement(Card, { title: "2026 Pulse", className: "flex flex-row items-center justify-between" },
                         React.createElement("div", null,
                             React.createElement("span", { className: "text-3xl font-bold text-zinc-900 dark:text-zinc-100" }, `${goalPercentage}%`),
                             React.createElement("p", { className: "text-xs text-zinc-500" }, "Q1 Progress")
                         ),
                         React.createElement("div", { className: "relative w-12 h-12" },
                             React.createElement("svg", { className: "w-full h-full -rotate-90" },
                                 React.createElement("circle", { cx: "24", cy: "24", r: "20", stroke: "currentColor", strokeWidth: "4", fill: "transparent", className: "text-zinc-100 dark:text-zinc-800" }),
                                 React.createElement("circle", { cx: "24", cy: "24", r: "20", stroke: "currentColor", strokeWidth: "4", fill: "transparent", strokeDasharray: 125, strokeDashoffset: 125 - (125 * (goalPercentage/100)), className: "text-rose-500", strokeLinecap: "round" })
                             )
                         )
                    )
                ),

                // ROW 3: HABITS & TASKS
                React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6" },
                     React.createElement(Card, { title: "Daily Habits", className: "lg:col-span-1" },
                        React.createElement("div", { className: "grid grid-cols-2 gap-3" },
                            habits.map(habit => 
                                React.createElement("button", { 
                                    key: habit.id, 
                                    onClick: () => toggleHabit(habit.id),
                                    className: `flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${habit.completed ? 'bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600 dark:text-emerald-400' : 'bg-zinc-50 dark:bg-zinc-900 border-zinc-100 dark:border-zinc-800 text-zinc-400 hover:border-zinc-300'}`
                                },
                                    React.createElement(habit.icon, { size: 20, className: "mb-1" }),
                                    React.createElement("span", { className: "text-xs font-bold" }, habit.label)
                                )
                            )
                        )
                     ),
                     React.createElement(Card, { title: "Task Radar (Do First)", className: "lg:col-span-2" },
                        doFirstTasks.length > 0 ? (
                            React.createElement("div", { className: "space-y-2" },
                                doFirstTasks.map(t => 
                                    React.createElement("div", { key: t.id, className: "flex items-center gap-3 p-3 bg-red-50/50 dark:bg-red-900/10 border border-red-100 dark:border-red-900/20 rounded-lg" },
                                        React.createElement("div", { className: "w-2 h-2 rounded-full bg-red-500" }),
                                        React.createElement("span", { className: "text-sm font-medium text-zinc-700 dark:text-zinc-200" }, t.text)
                                    )
                                )
                            )
                        ) : (
                            React.createElement("div", { className: "flex flex-col items-center justify-center h-full text-zinc-400 py-4" },
                                React.createElement(CheckCircle2, { size: 24, className: "mb-2 opacity-20" }),
                                React.createElement("p", { className: "text-xs" }, "No urgent tasks. You're clear.")
                            )
                        )
                     )
                ),

                // ROW 4: MIND & QUICK ACTIONS
                React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6" },
                    React.createElement(Card, { title: "Quick Capture" },
                        React.createElement("div", { className: "flex gap-2" },
                            React.createElement("input", { type: "text", value: quickNote, onChange: (e) => setQuickNote(e.target.value), onKeyDown: (e) => e.key === 'Enter' && handleQuickCapture(), placeholder: "Idea, reminder, thought...", className: "flex-1 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg px-3 py-2 text-sm focus:outline-none text-zinc-900 dark:text-zinc-100" }),
                            React.createElement("button", { onClick: handleQuickCapture, className: "p-2 bg-zinc-200 dark:bg-zinc-800 rounded-lg hover:bg-zinc-300" }, React.createElement(ArrowRight, { size: 16 }))
                        )
                    ),
                    React.createElement(Card, { title: "Mind Status" },
                         worries.length === 0 ? (
                             React.createElement("div", { className: "flex items-center gap-3" },
                                 React.createElement("div", { className: "p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-full text-emerald-600" }, React.createElement(ShieldCheck, { size: 18 })),
                                 React.createElement("div", null,
                                     React.createElement("p", { className: "text-sm font-bold text-zinc-800 dark:text-zinc-100" }, "Clear Mind"),
                                     React.createElement("p", { className: "text-xs text-zinc-500" }, "No active worries.")
                                 )
                             )
                         ) : (
                             React.createElement("div", { className: "flex items-center justify-between" },
                                 React.createElement("div", { className: "flex items-center gap-3" },
                                     React.createElement("div", { className: "p-2 bg-rose-100 dark:bg-rose-900/30 rounded-full text-rose-600" }, React.createElement(ShieldAlert, { size: 18 })),
                                     React.createElement("div", null,
                                         React.createElement("p", { className: "text-sm font-bold text-zinc-800 dark:text-zinc-100" }, `${worries.length} Worries`),
                                         React.createElement("p", { className: "text-xs text-zinc-500" }, "Weighing on you.")
                                     )
                                 ),
                                 React.createElement("button", { onClick: () => onNavigate('worries'), className: "text-xs font-bold text-rose-600 border border-rose-200 px-3 py-1 rounded-lg hover:bg-rose-50" }, "Let Go")
                             )
                         )
                    )
                )
            );
        };

        const EditableList = ({ items, onAdd, onToggle, onDelete, placeholder }) => {
            const [newItem, setNewItem] = useState("");
            return React.createElement("div", { className: "space-y-2" },
                items.map(item => 
                    React.createElement("div", { key: item.id, className: "flex items-start gap-3 w-full group" },
                        React.createElement("button", { onClick: () => onToggle(item.id), className: `mt-0.5 w-5 h-5 rounded border flex items-center justify-center shrink-0 transition-all ${item.completed ? 'bg-indigo-500 border-indigo-500 text-white' : 'border-zinc-400 bg-white dark:bg-zinc-800'}` }, 
                            React.createElement(CheckCircle2, { size: 14, className: item.completed ? "opacity-100" : "opacity-0" })
                        ),
                        React.createElement("span", { className: `text-sm leading-snug flex-1 ${item.completed ? 'text-zinc-400 line-through' : 'text-zinc-800 dark:text-zinc-200'}` }, item.text),
                        React.createElement("button", { onClick: () => onDelete(item.id), className: "text-zinc-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" }, React.createElement(Trash, { size: 14 }))
                    )
                ),
                React.createElement("div", { className: "flex gap-2 mt-2 pt-2 border-t border-zinc-100 dark:border-zinc-800" },
                    React.createElement("input", { 
                        type: "text", 
                        value: newItem, 
                        onChange: (e) => setNewItem(e.target.value), 
                        onKeyDown: (e) => { if (e.key === 'Enter' && newItem.trim()) { onAdd(newItem); setNewItem(""); } },
                        placeholder: placeholder || "Add new...", 
                        className: "flex-1 bg-transparent text-sm focus:outline-none text-zinc-600 dark:text-zinc-400" 
                    }),
                    React.createElement("button", { onClick: () => { if (newItem.trim()) { onAdd(newItem); setNewItem(""); } }, className: "text-indigo-500 hover:text-indigo-600" }, React.createElement(Plus, { size: 16 }))
                )
            );
        };

        const Goals2026View = ({ goalsData = DEFAULT_GOALS_DATA, onUpdateGoals }) => {
            const updateSection = (path, newData) => {
                const newGoals = { ...goalsData };
                if (path.includes('.')) {
                    const [parent, child] = path.split('.');
                    newGoals[parent] = { ...newGoals[parent], [child]: newData };
                } else {
                    newGoals[path] = newData;
                }
                onUpdateGoals(newGoals);
            };

            const addItem = (sectionPath, text) => {
                const [parent, child] = sectionPath.includes('.') ? sectionPath.split('.') : [sectionPath, null];
                const list = child ? goalsData[parent][child] : goalsData[parent];
                const newItem = { id: Date.now().toString(), text, completed: false };
                updateSection(sectionPath, [...list, newItem]);
            };

            const toggleItem = (sectionPath, id) => {
                const [parent, child] = sectionPath.includes('.') ? sectionPath.split('.') : [sectionPath, null];
                const list = child ? goalsData[parent][child] : goalsData[parent];
                const updatedList = list.map(item => item.id === id ? { ...item, completed: !item.completed } : item);
                updateSection(sectionPath, updatedList);
            };

            const deleteItem = (sectionPath, id) => {
                const [parent, child] = sectionPath.includes('.') ? sectionPath.split('.') : [sectionPath, null];
                const list = child ? goalsData[parent][child] : goalsData[parent];
                const updatedList = list.filter(item => item.id !== id);
                updateSection(sectionPath, updatedList);
            };

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4" },
                    React.createElement("div", null, React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "2026 Master Plan ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(Flag, { size: 12 }), " Vision")), React.createElement("p", { className: "text-zinc-500 text-sm mt-1" }, "Stability → Discipline → Direction")),
                ),
                React.createElement("div", { className: "space-y-8 pb-12 overflow-y-auto pr-2" },
                    React.createElement(Card, { className: "bg-gradient-to-br from-indigo-600 to-indigo-800 text-white border-none" },
                        React.createElement("div", { className: "flex flex-col h-full justify-between" },
                            React.createElement("div", null, React.createElement("div", { className: "flex items-center gap-2 text-indigo-200 text-xs font-bold uppercase tracking-wider mb-2" }, React.createElement(Target, { size: 14 }), " Primary Mission"), React.createElement("h4", { className: "text-lg font-bold leading-snug" }, goalsData.mission)),
                            React.createElement("div", { className: "mt-4 pt-4 border-t border-indigo-400/30" }, React.createElement("p", { className: "text-xs text-indigo-100 italic" }, "“I am questioning everything to build a future on solid rock.”"))
                        )
                    ),
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2" }, React.createElement(Milestone, { size: 16 }), " Strategic Timeline"),
                        React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6" },
                            React.createElement(Card, { title: "Phase 1: Stabilise" }, React.createElement(EditableList, { items: goalsData.phases.phase1, onAdd: (t) => addItem('phases.phase1', t), onToggle: (id) => toggleItem('phases.phase1', id), onDelete: (id) => deleteItem('phases.phase1', id) })),
                            React.createElement(Card, { title: "Phase 2: Discipline" }, React.createElement(EditableList, { items: goalsData.phases.phase2, onAdd: (t) => addItem('phases.phase2', t), onToggle: (id) => toggleItem('phases.phase2', id), onDelete: (id) => deleteItem('phases.phase2', id) })),
                            React.createElement(Card, { title: "Phase 3: Direction" }, React.createElement(EditableList, { items: goalsData.phases.phase3, onAdd: (t) => addItem('phases.phase3', t), onToggle: (id) => toggleItem('phases.phase3', id), onDelete: (id) => deleteItem('phases.phase3', id) }))
                        )
                    ),
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2" }, React.createElement(CalendarDays, { size: 16 }), " Quarterly Battle Plan"),
                        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
                            React.createElement(Card, { title: "Q1: The Foundation (Jan - Mar)", className: "border-t-4 border-t-rose-500 bg-rose-50/10" }, React.createElement(EditableList, { items: goalsData.quarters.q1, onAdd: (t) => addItem('quarters.q1', t), onToggle: (id) => toggleItem('quarters.q1', id), onDelete: (id) => deleteItem('quarters.q1', id) })),
                            React.createElement(Card, { title: "Q2: The Build (Apr - Jun)", className: "border-t-4 border-t-blue-500 bg-blue-50/10" }, React.createElement(EditableList, { items: goalsData.quarters.q2, onAdd: (t) => addItem('quarters.q2', t), onToggle: (id) => toggleItem('quarters.q2', id), onDelete: (id) => deleteItem('quarters.q2', id), placeholder: "Add Q2 Goal..." })),
                            React.createElement(Card, { title: "Q3: The Climb (Jul - Sep)", className: "border-t-4 border-t-amber-500 bg-amber-50/10" }, React.createElement(EditableList, { items: goalsData.quarters.q3, onAdd: (t) => addItem('quarters.q3', t), onToggle: (id) => toggleItem('quarters.q3', id), onDelete: (id) => deleteItem('quarters.q3', id), placeholder: "Add Q3 Goal..." })),
                            React.createElement(Card, { title: "Q4: The Arrival (Oct - Dec)", className: "border-t-4 border-t-emerald-500 bg-emerald-50/10" }, React.createElement(EditableList, { items: goalsData.quarters.q4, onAdd: (t) => addItem('quarters.q4', t), onToggle: (id) => toggleItem('quarters.q4', id), onDelete: (id) => deleteItem('quarters.q4', id), placeholder: "Add Q4 Goal..." }))
                        )
                    ),
                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
                        React.createElement(Card, { title: "Weekly Execution Protocol", className: "h-full bg-zinc-50 dark:bg-zinc-900/50" }, React.createElement(EditableList, { items: goalsData.execution.weekly, onAdd: (t) => addItem('execution.weekly', t), onToggle: (id) => toggleItem('execution.weekly', id), onDelete: (id) => deleteItem('execution.weekly', id) })),
                        React.createElement(Card, { title: "Daily Non-Negotiables", className: "h-full border-2 border-emerald-500/20 bg-emerald-50/10" }, React.createElement(EditableList, { items: goalsData.execution.daily, onAdd: (t) => addItem('execution.daily', t), onToggle: (id) => toggleItem('execution.daily', id), onDelete: (id) => deleteItem('execution.daily', id) }))
                    )
                )
            );
        };

        const TasksView = ({ tasks, onAddTask, onUpdateTask, onDeleteTask }) => {
            const [newTaskInput, setNewTaskInput] = useState("");
            const handleKeyDown = (e) => { if (e.key === 'Enter' && newTaskInput.trim()) { onAddTask({ text: newTaskInput, category: 'do_first', completed: false }); setNewTaskInput(""); } };
            const quadrants = [
                { id: 'do_first', title: 'Do First', color: 'bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-900/30' }, 
                { id: 'schedule', title: 'Schedule', color: 'bg-blue-50 dark:bg-blue-900/10 border-blue-200 dark:border-blue-900/30' }, 
                { id: 'delegate', title: 'Delegate', color: 'bg-orange-50 dark:bg-orange-900/10 border-orange-200 dark:border-orange-900/30' }, 
                { id: 'dont_do', title: 'Eliminate', color: 'bg-zinc-50 dark:bg-zinc-900/50 border-zinc-200 dark:border-zinc-800' }
            ];
            const onDrop = (e, cat) => { e.preventDefault(); const id = e.dataTransfer.getData("id"); onUpdateTask(id, { category: cat }); };

            return React.createElement("div", { className: "flex flex-col h-[calc(100vh-8rem)] pb-2" },
                React.createElement("div", { className: "mb-4 flex gap-4 shrink-0" },
                    React.createElement("input", { type: "text", value: newTaskInput, onChange: (e) => setNewTaskInput(e.target.value), onKeyDown: handleKeyDown, placeholder: "Add new task...", className: "flex-1 p-3 rounded-xl border bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 shadow-sm focus:ring-2 focus:ring-indigo-500/50 outline-none" }),
                    React.createElement("button", { onClick: () => { if(newTaskInput.trim()){ onAddTask({text:newTaskInput, category:'do_first'}); setNewTaskInput("");}}, className: "p-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20" }, React.createElement(Plus, { size: 24 }))
                ),
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 flex-1 min-h-0" },
                    quadrants.map(q => React.createElement("div", { key: q.id, onDragOver: e=>e.preventDefault(), onDrop: e=>onDrop(e, q.id), className: `p-4 rounded-2xl ${q.color} border flex flex-col h-full overflow-hidden relative group` },
                        React.createElement("div", { className: "flex justify-between items-center mb-4 shrink-0" },
                            React.createElement("h4", { className: "font-bold text-lg text-zinc-800 dark:text-zinc-100" }, q.title),
                            React.createElement("span", { className: "text-xs font-bold bg-white/50 dark:bg-black/20 px-2 py-1 rounded-lg" }, tasks.filter(t => t.category === q.id).length)
                        ),
                        React.createElement("div", { className: "flex-1 overflow-y-auto space-y-2 pr-1 custom-scrollbar" },
                            tasks.filter(t => t.category === q.id).map(t => React.createElement("div", { key: t.id, draggable: true, onDragStart: e=>e.dataTransfer.setData("id", t.id), className: "flex gap-3 p-3 bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-zinc-100 dark:border-zinc-800 cursor-move hover:shadow-md hover:border-indigo-500/30 transition-all items-start group/item" },
                                React.createElement("button", { onClick: () => onUpdateTask(t.id, { completed: !t.completed }), className: "mt-0.5 shrink-0" }, React.createElement(CheckCircle2, { size: 18, className: t.completed ? "text-emerald-500" : "text-zinc-300 dark:text-zinc-600 hover:text-zinc-400" })),
                                React.createElement("span", { className: `text-sm leading-snug flex-1 ${t.completed ? "line-through text-zinc-400" : "text-zinc-700 dark:text-zinc-200"}` }, t.text),
                                React.createElement("button", { onClick: () => onDeleteTask(t.id), className: "text-zinc-300 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity" }, React.createElement(Trash, { size: 16 }))
                            ))
                        )
                    ))
                )
            );
        };

        const WorriesView = ({ worries, onAddWorry, onDeleteWorry }) => {
            const [input, setInput] = useState("");
            
            const handleKeyDown = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (input.trim()) { onAddWorry(input); setInput(""); }
                }
            };

            const formatDate = (val) => {
                if (!val) return "";
                const date = val.seconds ? new Date(val.seconds * 1000) : new Date(val);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
            };

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                // Header
                React.createElement("div", { className: "mb-8" },
                    React.createElement("div", { className: "flex items-center justify-between" },
                        React.createElement("div", null,
                            React.createElement("h3", { className: "text-3xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-3" }, 
                                React.createElement("div", { className: "p-2 bg-rose-100 dark:bg-rose-900/30 rounded-xl text-rose-600" }, React.createElement(ShieldAlert, { size: 24 })),
                                "Worry Jar"
                            ),
                            React.createElement("p", { className: "text-zinc-500 text-sm mt-2 ml-1" }, "Write it down. Let it go. Free your mind.")
                        ),
                        React.createElement("div", { className: "hidden md:block text-right text-xs text-zinc-400 italic" }, 
                            "\"Cast all your anxiety on him because he cares for you.\""
                        )
                    )
                ),

                // Input Area (Hero)
                React.createElement("div", { className: "mb-10 relative group" },
                    // Glowing background effect
                    React.createElement("div", { className: "absolute -inset-0.5 bg-gradient-to-r from-rose-500 to-orange-500 rounded-2xl opacity-20 group-hover:opacity-40 transition duration-500 blur-sm" }),
                    React.createElement("div", { className: "relative bg-white dark:bg-zinc-900 rounded-2xl p-1 shadow-xl" },
                        React.createElement("textarea", { 
                            value: input, 
                            onChange: (e) => setInput(e.target.value), 
                            onKeyDown: handleKeyDown, 
                            placeholder: "What is weighing on your mind? (Press Enter to cast it away)", 
                            className: "w-full p-4 bg-transparent border-none focus:ring-0 text-lg text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400 resize-none min-h-[100px] outline-none" 
                        }),
                        React.createElement("div", { className: "flex justify-between items-center px-4 pb-2 border-t border-zinc-100 dark:border-zinc-800 pt-2" },
                            React.createElement("span", { className: "text-xs text-zinc-400 font-medium" }, "Leave it here"),
                            React.createElement("button", { 
                                onClick: () => { if(input.trim()) { onAddWorry(input); setInput(""); }}, 
                                disabled: !input.trim(),
                                className: "bg-rose-600 hover:bg-rose-700 disabled:opacity-50 text-white rounded-lg p-2 transition-all hover:scale-105" 
                            }, React.createElement(ArrowRight, { size: 20 }))
                        )
                    )
                ),

                // The Grid of Worries
                React.createElement("div", { className: "flex-1 overflow-y-auto pr-2 pb-4 custom-scrollbar" },
                    worries.length === 0 ? (
                        React.createElement("div", { className: "flex flex-col items-center justify-center h-48 text-zinc-400 opacity-60" },
                            React.createElement(ShieldCheck, { size: 48, className: "mb-4 animate-bounce" }),
                            React.createElement("p", { className: "font-medium" }, "Your mind is clear."),
                            React.createElement("p", { className: "text-xs" }, "Nothing weighing you down right now.")
                        )
                    ) : (
                        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" },
                            worries.map(worry => 
                                React.createElement("div", { key: worry.id, className: "group relative bg-white dark:bg-zinc-900/50 hover:bg-white dark:hover:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 hover:border-rose-500/30 rounded-2xl p-5 transition-all duration-300 hover:shadow-lg hover:-translate-y-1 flex flex-col" },
                                    React.createElement("div", { className: "mb-4 flex-1" },
                                        React.createElement("p", { className: "text-zinc-700 dark:text-zinc-300 whitespace-pre-wrap leading-relaxed text-sm" }, worry.text)
                                    ),
                                    React.createElement("div", { className: "flex justify-between items-center pt-3 border-t border-zinc-100 dark:border-zinc-800/50" },
                                        React.createElement("span", { className: "text-[10px] text-zinc-400 font-bold uppercase tracking-wider" }, formatDate(worry.createdAt)),
                                        React.createElement("button", { 
                                            onClick: () => onDeleteWorry(worry.id), 
                                            className: "text-zinc-400 hover:text-emerald-600 transition-colors px-2 py-1 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-lg text-xs font-bold flex items-center gap-1 opacity-0 group-hover:opacity-100" 
                                        }, 
                                            React.createElement("span", null, "Let Go"),
                                            React.createElement(CheckCircle2, { size: 14 }) 
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        };

        const FocusView = ({ focusState, toggleTimer, resetTimer, activeSound, isPlayingSound, toggleSound }) => {
            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };
            
            const progress = ((focusState.initialTime - focusState.timeLeft) / focusState.initialTime) * 100;
            const radius = 120;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (progress / 100) * circumference;

            return React.createElement("div", { className: "h-full flex flex-col items-center justify-center pb-24" },
                React.createElement("div", { className: "relative mb-8 group" },
                     // SVG Timer Ring
                    React.createElement("svg", { className: "w-80 h-80 transform -rotate-90" },
                        React.createElement("circle", { cx: "160", cy: "160", r: radius, stroke: "currentColor", strokeWidth: "8", fill: "transparent", className: "text-zinc-200 dark:text-zinc-800" }),
                        React.createElement("circle", { cx: "160", cy: "160", r: radius, stroke: "currentColor", strokeWidth: "8", fill: "transparent", strokeDasharray: circumference, strokeDashoffset: offset, className: "text-indigo-600 transition-all duration-1000 ease-linear timer-progress", strokeLinecap: "round" })
                    ),
                    React.createElement("div", { className: "absolute inset-0 flex flex-col items-center justify-center" },
                        React.createElement("span", { className: "text-7xl font-mono font-bold tracking-tighter text-zinc-900 dark:text-zinc-100" }, formatTime(focusState.timeLeft)),
                        React.createElement("span", { className: "mt-2 text-zinc-500 uppercase tracking-widest text-xs font-bold" }, focusState.isActive ? "FOCUSING" : "PAUSED")
                    )
                ),
                React.createElement("div", { className: "flex gap-6 mb-12" },
                    React.createElement("button", { onClick: toggleTimer, className: "w-20 h-20 rounded-full flex items-center justify-center bg-indigo-600 text-white hover:bg-indigo-700 shadow-xl shadow-indigo-500/30 transition-all hover:scale-105 active:scale-95" }, 
                        focusState.isActive ? React.createElement(Pause, { size: 32, fill: "currentColor" }) : React.createElement(Play, { size: 32, fill: "currentColor", className: "ml-1" })
                    ),
                    React.createElement("button", { onClick: () => resetTimer(), className: "w-20 h-20 rounded-full flex items-center justify-center bg-zinc-200 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-all active:scale-95" }, 
                        React.createElement(RotateCcw, { size: 28 })
                    )
                ),
                React.createElement("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 w-full max-w-2xl mb-8" },
                    React.createElement("button", { onClick: () => resetTimer(1500), className: "px-4 py-3 rounded-xl border-2 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500/50 hover:bg-indigo-50 dark:hover:bg-indigo-900/10 font-bold text-zinc-600 dark:text-zinc-400" }, "25m Focus"),
                    React.createElement("button", { onClick: () => resetTimer(300), className: "px-4 py-3 rounded-xl border-2 border-zinc-200 dark:border-zinc-800 hover:border-emerald-500/50 hover:bg-emerald-50 dark:hover:bg-emerald-900/10 font-bold text-zinc-600 dark:text-zinc-400" }, "5m Break"),
                    React.createElement("button", { onClick: () => resetTimer(900), className: "px-4 py-3 rounded-xl border-2 border-zinc-200 dark:border-zinc-800 hover:border-blue-500/50 hover:bg-blue-50 dark:hover:bg-blue-900/10 font-bold text-zinc-600 dark:text-zinc-400" }, "15m Break"),
                    React.createElement("button", { onClick: () => resetTimer(3600), className: "px-4 py-3 rounded-xl border-2 border-zinc-200 dark:border-zinc-800 hover:border-purple-500/50 hover:bg-purple-50 dark:hover:bg-purple-900/10 font-bold text-zinc-600 dark:text-zinc-400" }, "60m Deep")
                ),
                React.createElement("div", { className: "w-full max-w-2xl" },
                    React.createElement("div", { className: "flex items-center gap-2 mb-4 text-xs font-semibold uppercase tracking-wider text-zinc-500" }, React.createElement(Volume2, { size: 14 }), " Ambient Soundscapes"),
                    React.createElement("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4" },
                        FOCUS_SOUNDS.map(s => React.createElement("button", { key: s.id, onClick: () => toggleSound(s), className: `flex items-center gap-2 p-3 rounded-xl border-2 transition-all ${activeSound === s.id && isPlayingSound ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400' : 'border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 text-zinc-500 hover:border-zinc-300'}` }, 
                            React.createElement(s.icon, { size: 18, className: activeSound === s.id && isPlayingSound ? "animate-pulse" : "" }), 
                            React.createElement("span", { className: "text-sm font-bold" }, s.label)
                        ))
                    )
                )
            );
        };

        const BrainDumpView = ({ dumps, onAddDump, onDeleteDump }) => {
            const [input, setInput] = useState("");
            
            const handleKeyDown = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (input.trim()) { onAddDump(input); setInput(""); }
                }
            };

            const formatDate = (val) => {
                if (!val) return "";
                // Handle Firebase Timestamp or standard Date string/object
                const date = val.seconds ? new Date(val.seconds * 1000) : new Date(val);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
            };

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                // Header
                React.createElement("div", { className: "mb-8" },
                    React.createElement("div", { className: "flex items-center justify-between" },
                        React.createElement("div", null,
                            React.createElement("h3", { className: "text-3xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-3" }, 
                                React.createElement("div", { className: "p-2 bg-purple-100 dark:bg-purple-900/30 rounded-xl text-purple-600" }, React.createElement(Brain, { size: 24 })),
                                "Mind Palace"
                            ),
                            React.createElement("p", { className: "text-zinc-500 text-sm mt-2 ml-1" }, "Offload the noise. Capture the signal.")
                        ),
                        React.createElement("div", { className: "hidden md:block text-right text-xs text-zinc-400 italic" }, 
                            "\"Empty your mind, be formless.\""
                        )
                    )
                ),

                // Input Area (Hero)
                React.createElement("div", { className: "mb-10 relative group" },
                    // Glowing background effect
                    React.createElement("div", { className: "absolute -inset-0.5 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-2xl opacity-20 group-hover:opacity-40 transition duration-500 blur-sm" }),
                    React.createElement("div", { className: "relative bg-white dark:bg-zinc-900 rounded-2xl p-1 shadow-xl" },
                        React.createElement("textarea", { 
                            value: input, 
                            onChange: (e) => setInput(e.target.value), 
                            onKeyDown: handleKeyDown, 
                            placeholder: "What's on your mind? (Press Enter to capture)", 
                            className: "w-full p-4 bg-transparent border-none focus:ring-0 text-lg text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400 resize-none min-h-[100px] outline-none" 
                        }),
                        React.createElement("div", { className: "flex justify-between items-center px-4 pb-2 border-t border-zinc-100 dark:border-zinc-800 pt-2" },
                            React.createElement("span", { className: "text-xs text-zinc-400 font-medium" }, "Clear your thoughts"),
                            React.createElement("button", { 
                                onClick: () => { if(input.trim()) { onAddDump(input); setInput(""); }}, 
                                disabled: !input.trim(),
                                className: "bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white rounded-lg p-2 transition-all hover:scale-105" 
                            }, React.createElement(ArrowRight, { size: 20 }))
                        )
                    )
                ),

                // The Grid of Thoughts
                React.createElement("div", { className: "flex-1 overflow-y-auto pr-2 pb-4 custom-scrollbar" },
                    dumps.length === 0 ? (
                        React.createElement("div", { className: "flex flex-col items-center justify-center h-48 text-zinc-400 opacity-60" },
                            React.createElement(Wind, { size: 48, className: "mb-4 animate-pulse" }),
                            React.createElement("p", { className: "font-medium" }, "Your mind is clear."),
                            React.createElement("p", { className: "text-xs" }, "Capture a thought above to get started.")
                        )
                    ) : (
                        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" },
                            dumps.map(dump => 
                                React.createElement("div", { key: dump.id, className: "group relative bg-white dark:bg-zinc-900/50 hover:bg-white dark:hover:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 hover:border-purple-500/30 rounded-2xl p-5 transition-all duration-300 hover:shadow-lg hover:-translate-y-1 flex flex-col" },
                                    React.createElement("div", { className: "mb-4 flex-1" },
                                        React.createElement("p", { className: "text-zinc-700 dark:text-zinc-300 whitespace-pre-wrap leading-relaxed text-sm" }, dump.text)
                                    ),
                                    React.createElement("div", { className: "flex justify-between items-center pt-3 border-t border-zinc-100 dark:border-zinc-800/50" },
                                        React.createElement("span", { className: "text-[10px] text-zinc-400 font-bold uppercase tracking-wider" }, formatDate(dump.createdAt)),
                                        React.createElement("button", { 
                                            onClick: () => onDeleteDump(dump.id), 
                                            className: "text-zinc-300 hover:text-red-500 transition-colors p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg opacity-0 group-hover:opacity-100" 
                                        }, React.createElement(Trash, { size: 14 }))
                                    )
                                )
                            )
                        )
                    )
                )
            );
        };

        const SpiritualityView = ({ notes, onAddNote, onDeleteNote }) => {
            const [view, setView] = useState('daily');
            const [input, setInput] = useState("");
            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const dailyContent = DAILY_SPIRITUALITY[dayOfYear % DAILY_SPIRITUALITY.length];

            const handleAdd = () => {
                if (input.trim()) {
                    onAddNote(input);
                    setInput("");
                }
            };

            const formatDate = (val) => {
                if (!val) return "";
                const date = val.seconds ? new Date(val.seconds * 1000) : new Date(val);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            };

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Spirituality ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(Flower2, { size: 12 }), " Soul Care")),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Daily guidance, prayer, and reflection.")
                    ),
                    React.createElement("div", { className: "flex p-1 bg-zinc-100 dark:bg-zinc-800 rounded-lg" },
                        ['Daily', 'Guide', 'Journal'].map(tab => 
                            React.createElement("button", { 
                                key: tab,
                                onClick: () => setView(tab.toLowerCase()),
                                className: `px-4 py-1.5 text-sm font-medium rounded-md transition-all ${view === tab.toLowerCase() ? 'bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100' : 'text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300'}`
                            }, tab)
                        )
                    )
                ),
                
                React.createElement("div", { className: "flex-1 overflow-y-auto pr-2 pb-4 custom-scrollbar" },
                    view === 'daily' && React.createElement("div", { className: "space-y-6" },
                        React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6" },
                            React.createElement("div", { className: "lg:col-span-1" },
                                React.createElement(Card, { title: "Verse of the Day", className: "bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/20 border-amber-200 dark:border-amber-900/50 h-full" },
                                    React.createElement("div", { className: "flex flex-col h-full justify-center" },
                                        React.createElement("h4", { className: "text-lg font-bold text-amber-800 dark:text-amber-200 mb-2" }, dailyContent.verse),
                                        React.createElement("p", { className: "text-amber-900 dark:text-amber-100 font-serif italic text-lg leading-relaxed" }, `"${dailyContent.text}"`)
                                    )
                                )
                            ),
                            React.createElement("div", { className: "lg:col-span-2" },
                                React.createElement(Card, { title: "Daily Prayer & Encouragement" },
                                    React.createElement("div", { className: "space-y-6" },
                                        React.createElement("div", null, React.createElement("div", { className: "flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-zinc-400 mb-2" }, React.createElement(Heart, { size: 12 }), " Prayer Point"), React.createElement("p", { className: "text-zinc-700 dark:text-zinc-200" }, dailyContent.prayer)),
                                        React.createElement("div", { className: "h-px w-full bg-zinc-100 dark:bg-zinc-800" }),
                                        React.createElement("div", null, React.createElement("div", { className: "flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-zinc-400 mb-2" }, React.createElement(Sun, { size: 12 }), " Word of Encouragement"), React.createElement("p", { className: "text-zinc-700 dark:text-zinc-200" }, dailyContent.encouragement))
                                    )
                                )
                            )
                        )
                    ),

                    view === 'guide' && React.createElement("div", { className: "space-y-8" },
                        React.createElement("div", null,
                            React.createElement("h3", { className: "text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2" }, React.createElement(Book, { size: 16 }), " Topic Reference"),
                            React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" },
                                BIBLE_TOPICS.map((topic, i) => (
                                    React.createElement("div", { key: i, className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl p-5 hover:border-amber-500/30 transition-all group" },
                                        React.createElement("h4", { className: "font-bold text-zinc-800 dark:text-zinc-100 mb-1 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors" }, topic.title),
                                        React.createElement("p", { className: "text-xs text-zinc-500 mb-4" }, topic.desc),
                                        React.createElement("div", { className: "space-y-3" },
                                            React.createElement("div", null, React.createElement("span", { className: "text-[10px] font-bold text-zinc-400 uppercase block mb-1" }, "Key Verses"), React.createElement("ul", { className: "space-y-1" }, topic.verses.slice(0, 2).map((v, j) => React.createElement("li", { key: j, className: "text-xs text-zinc-600 dark:text-zinc-300 pl-2 border-l-2 border-zinc-200 dark:border-zinc-700" }, v)))),
                                            React.createElement("div", null, React.createElement("span", { className: "text-[10px] font-bold text-zinc-400 uppercase block mb-1" }, "Chapters"), React.createElement("div", { className: "flex flex-wrap gap-1" }, topic.chapters.map((c, k) => React.createElement("span", { key: k, className: "px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 text-[10px] rounded" }, c))))
                                        )
                                    )
                                ))
                            )
                        ),
                        React.createElement("div", null,
                            React.createElement("h3", { className: "text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2" }, React.createElement(Bookmark, { size: 16 }), " Bible Overview"),
                            BIBLE_BOOKS.map((section, idx) => (
                                React.createElement("div", { key: idx, className: "mb-6" },
                                    React.createElement("h4", { className: "text-xs font-bold text-amber-600 dark:text-amber-500 uppercase tracking-widest mb-3 border-b border-zinc-200 dark:border-zinc-800 pb-1" }, section.category),
                                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                                        section.books.map((book, bIdx) => (
                                            React.createElement("div", { key: bIdx, className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-3 rounded-lg flex flex-col" },
                                                React.createElement("div", { className: "flex justify-between items-start mb-1" }, React.createElement("h5", { className: "font-bold text-zinc-900 dark:text-zinc-100 text-sm" }, book.name), React.createElement("span", { className: "text-[10px] px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-500" }, book.theme)),
                                                React.createElement("p", { className: "text-xs text-zinc-600 dark:text-zinc-400 mb-2 flex-1" }, book.app),
                                                React.createElement("div", { className: "flex items-center gap-2 text-amber-500" }, React.createElement(BookOpen, { size: 12 }), React.createElement("span", { className: "text-[10px] font-mono text-zinc-500" }, book.keys))
                                            )
                                        ))
                                    )
                                )
                            ))
                        )
                    ),

                    view === 'journal' && React.createElement("div", { className: "space-y-6" },
                        // Input
                        React.createElement("div", { className: "bg-white dark:bg-zinc-900 rounded-2xl p-4 border border-zinc-200 dark:border-zinc-800 shadow-sm" },
                            React.createElement("textarea", {
                                value: input,
                                onChange: (e) => setInput(e.target.value),
                                placeholder: "Write down your prayers, sermon notes, or reflections...",
                                className: "w-full bg-transparent border-none focus:ring-0 text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400 resize-none min-h-[120px] outline-none"
                            }),
                            React.createElement("div", { className: "flex justify-between items-center pt-2 border-t border-zinc-100 dark:border-zinc-800" },
                                React.createElement("span", { className: "text-xs text-zinc-400 font-medium" }, "Capture your walk with God"),
                                React.createElement("button", { 
                                    onClick: handleAdd,
                                    disabled: !input.trim(),
                                    className: "flex items-center gap-2 bg-amber-600 hover:bg-amber-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors" 
                                }, React.createElement(Plus, { size: 16 }), "Save Note")
                            )
                        ),
                        // List
                        React.createElement("div", { className: "space-y-4" },
                            notes.length === 0 ? (
                                React.createElement("div", { className: "text-center py-12 text-zinc-400" },
                                    React.createElement(Book, { size: 32, className: "mx-auto mb-2 opacity-20" }),
                                    React.createElement("p", { className: "text-sm" }, "No spiritual notes yet.")
                                )
                            ) : (
                                notes.map(note => 
                                    React.createElement("div", { key: note.id, className: "group relative bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-5 rounded-xl hover:border-amber-500/30 transition-all" },
                                        React.createElement("p", { className: "text-zinc-700 dark:text-zinc-300 whitespace-pre-wrap leading-relaxed text-sm" }, note.text),
                                        React.createElement("div", { className: "flex justify-between items-center mt-3 pt-3 border-t border-zinc-100 dark:border-zinc-800/50" },
                                            React.createElement("span", { className: "text-[10px] text-zinc-400 font-bold uppercase tracking-wider" }, formatDate(note.createdAt)),
                                            React.createElement("button", { onClick: () => onDeleteNote(note.id), className: "text-zinc-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" }, React.createElement(Trash, { size: 14 }))
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        };

        const FitnessView = () => {
            const [plan, setPlan] = useState('gym'); // 'gym' or 'home'
            const currentPlan = plan === 'gym' ? GYM_WORKOUT_PLAN : HOME_WORKOUT_PLAN; // Using constants from earlier definitions? Wait, I need to make sure they are defined or pass them.
            // Actually, constants like GYM_WORKOUT_PLAN were defined in previous turns but missing in this block.
            // I will define them inside or assume they are available if defined globally.
            // To be safe and self-contained, I will define them here or above. They were defined above in previous complete code.
            // In this specific response, I am regenerating the whole file so I will ensure they are there.

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Fitness Protocol ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(Dumbbell, { size: 12 }), " Hypertrophy")),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, plan === 'gym' ? "4-Day Gym Split (Balanced)" : "4-Day Home DB Split (Arms, Chest, Legs, Shoulders)")
                    ),
                    React.createElement("div", { className: "flex p-1 bg-zinc-100 dark:bg-zinc-800 rounded-lg" },
                        React.createElement("button", { onClick: () => setPlan('gym'), className: `px-4 py-1.5 text-sm font-medium rounded-md transition-all ${plan === 'gym' ? 'bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100' : 'text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300'}` }, "Gym"),
                        React.createElement("button", { onClick: () => setPlan('home'), className: `px-4 py-1.5 text-sm font-medium rounded-md transition-all ${plan === 'home' ? 'bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100' : 'text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300'}` }, "Home")
                    )
                ),
                React.createElement("div", { className: "flex-1 overflow-y-auto pr-2 space-y-6 pb-8 custom-scrollbar" },
                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
                        currentPlan.map(session => ( // Relies on closure over constants defined above
                            React.createElement("div", { key: session.id, className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl overflow-hidden hover:border-zinc-300 dark:hover:border-zinc-700 transition-all group" },
                                React.createElement("div", { className: "p-6 border-b border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-950/50" },
                                    React.createElement("div", { className: "flex items-start justify-between" },
                                        React.createElement("div", null,
                                            React.createElement("h5", { className: `text-lg font-bold ${session.color}` }, session.title),
                                            session.subtitle && React.createElement("p", { className: "text-xs text-zinc-500 mt-1" }, session.subtitle)
                                        ),
                                        React.createElement(session.icon, { className: `${session.color} opacity-80`, size: 24 })
                                    )
                                ),
                                React.createElement("div", { className: "p-6 space-y-6" },
                                    session.warmup.length > 0 && React.createElement("div", null,
                                        React.createElement("div", { className: "text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-2" }, "Warm-up"),
                                        React.createElement("ul", { className: "space-y-1" },
                                            session.warmup.map((w, i) => React.createElement("li", { key: i, className: "text-sm text-zinc-600 dark:text-zinc-400 flex items-center gap-2" }, 
                                                React.createElement("div", { className: "w-1 h-1 rounded-full bg-zinc-400" }), w
                                            ))
                                        )
                                    ),
                                    React.createElement("div", null,
                                        React.createElement("div", { className: "text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-2" }, "Workout"),
                                        React.createElement("div", { className: "space-y-3" },
                                            session.exercises.map((ex, i) => (
                                                React.createElement("div", { key: i, className: "flex justify-between items-center text-sm border-b border-zinc-50 dark:border-zinc-800/50 pb-2 last:border-0 last:pb-0" },
                                                    React.createElement("span", { className: "font-medium text-zinc-800 dark:text-zinc-200" }, ex.name),
                                                    React.createElement("span", { className: "font-mono text-zinc-500 text-xs bg-zinc-100 dark:bg-zinc-800 px-2 py-0.5 rounded" }, `${ex.sets} × ${ex.reps}`)
                                                )
                                            ))
                                        )
                                    ),
                                    React.createElement("div", { className: "bg-red-50 dark:bg-red-900/10 p-3 rounded-lg border border-red-100 dark:border-red-900/20" },
                                        React.createElement("div", { className: "text-[10px] font-bold text-red-500 uppercase tracking-wider mb-1" }, "Finisher"),
                                        React.createElement("p", { className: "text-sm font-bold text-zinc-800 dark:text-zinc-200" }, session.finisher)
                                    )
                                )
                            )
                        ))
                    )
                )
            );
        };

        const FoodView = ({ meals, onUpdateMeal }) => {
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const types = ['Breakfast', 'Lunch', 'Dinner', 'Snack'];
            const [viewMode, setViewMode] = useState('day');
            const todayIndex = (new Date().getDay() + 6) % 7;
            const [activeDayIndex, setActiveDayIndex] = useState(todayIndex);

            const getMeal = (day, type) => {
                const userMeal = meals.find(m => m.day === day && m.type === type);
                if (userMeal) return userMeal.text;
                const defaultMeal = DEFAULT_MEALS.find(m => m.day === day && m.type === type);
                return defaultMeal ? defaultMeal.text : "";
            };

            const getTypeColor = (type) => {
                switch(type) {
                    case 'Breakfast': return 'text-orange-500 bg-orange-50 dark:bg-orange-900/10';
                    case 'Lunch': return 'text-blue-500 bg-blue-50 dark:bg-blue-900/10';
                    case 'Dinner': return 'text-indigo-500 bg-indigo-50 dark:bg-indigo-900/10';
                    default: return 'text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10';
                }
            };

            return React.createElement("div", { className: "h-full flex flex-col pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-6" },
                    React.createElement("h3", { className: "text-2xl font-bold" }, "Nutrition"),
                    React.createElement("div", { className: "flex p-1 bg-zinc-100 dark:bg-zinc-800 rounded-lg" },
                        React.createElement("button", { onClick: () => setViewMode('day'), className: `px-4 py-1.5 rounded ${viewMode === 'day' ? 'bg-white shadow' : ''}` }, "Day"),
                        React.createElement("button", { onClick: () => setViewMode('week'), className: `px-4 py-1.5 rounded ${viewMode === 'week' ? 'bg-white shadow' : ''}` }, "Week")
                    )
                ),
                viewMode === 'day' ? (
                    React.createElement("div", { className: "flex-1 overflow-y-auto" },
                        React.createElement("div", { className: "flex items-center justify-between mb-6 p-3 rounded-xl border bg-white dark:bg-zinc-900" },
                            React.createElement("button", { onClick: () => setActiveDayIndex((prev) => (prev - 1 + 7) % 7) }, React.createElement(ChevronLeft, { size: 20 })),
                            React.createElement("span", { className: "font-bold" }, days[activeDayIndex]),
                            React.createElement("button", { onClick: () => setActiveDayIndex((prev) => (prev + 1) % 7) }, React.createElement(ChevronRight, { size: 20 }))
                        ),
                        React.createElement("div", { className: "grid gap-4" },
                            types.map(type => React.createElement("div", { key: type, className: "p-4 rounded-xl border bg-white dark:bg-zinc-900" },
                                React.createElement("div", { className: `font-bold text-xs uppercase mb-2 px-2 py-1 rounded w-fit ${getTypeColor(type)}` }, type),
                                React.createElement("textarea", { value: getMeal(days[activeDayIndex], type), onChange: (e) => onUpdateMeal(days[activeDayIndex], type, e.target.value), className: "w-full bg-transparent resize-none focus:outline-none text-zinc-900 dark:text-zinc-100" })
                            ))
                        )
                    )
                ) : (
                    React.createElement("div", { className: "flex-1 overflow-y-auto space-y-6" },
                        days.map(day => React.createElement("div", { key: day, className: "border rounded-xl bg-white dark:bg-zinc-900 overflow-hidden" },
                            React.createElement("div", { className: "p-3 bg-zinc-50 dark:bg-zinc-950 font-bold border-b" }, day),
                            React.createElement("div", { className: "grid grid-cols-2 divide-x divide-y" },
                                types.map(type => React.createElement("div", { key: type, className: "p-3" },
                                    React.createElement("div", { className: "text-xs font-bold text-zinc-500 mb-1" }, type),
                                    React.createElement("textarea", { value: getMeal(day, type), onChange: (e) => onUpdateMeal(day, type, e.target.value), className: "w-full bg-transparent resize-none text-sm focus:outline-none text-zinc-900 dark:text-zinc-100", rows: 2 })
                                ))
                            )
                        ))
                    )
                )
            );
        };
        
        const ToolsView = ({ tools, onAddTool }) => {
            const [isAdding, setIsAdding] = useState(false);
            const [newUrl, setNewUrl] = useState("");
            const [newName, setNewName] = useState("");
            const [newCategory, setNewCategory] = useState("Productivity HQ");

            const categories = ["Productivity HQ", "Dev & Career", "Knowledge & Growth", "Finance", "Creative Suite", "Utilities"];

            const getIconForTool = (url, name) => {
                const lowerUrl = url.toLowerCase();
                const lowerName = name.toLowerCase();
                if (lowerUrl.includes('github')) return Github;
                if (lowerUrl.includes('youtube')) return Video;
                if (lowerUrl.includes('mail') || lowerUrl.includes('gmail')) return Mail;
                if (lowerUrl.includes('calendar')) return CalendarIcon;
                if (lowerUrl.includes('chat') || lowerName.includes('gpt')) return Bot;
                if (lowerUrl.includes('notion')) return Layers;
                if (lowerUrl.includes('figma') || lowerUrl.includes('canva')) return PenTool;
                if (lowerUrl.includes('finance') || lowerUrl.includes('bank') || lowerUrl.includes('pay')) return DollarSign;
                if (lowerUrl.includes('terminal')) return Terminal;
                return LinkIcon;
            };

            const handleAdd = () => {
                if (newUrl && newName) {
                    onAddTool({ name: newName, url: newUrl, category: newCategory });
                    setNewUrl("");
                    setNewName("");
                    setIsAdding(false);
                }
            };

            const groupedTools = tools.reduce((acc, tool) => {
                if (!acc[tool.category]) acc[tool.category] = [];
                acc[tool.category].push(tool);
                return acc;
            }, {});

            return React.createElement("div", { className: "h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24 md:pb-0" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2" }, "Toolbox ", React.createElement("span", { className: "px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1" }, React.createElement(Wrench, { size: 12 }), " Essentials")),
                        React.createElement("p", { className: "text-zinc-500 text-sm" }, "Leverage technology to amplify your output.")
                    ),
                    React.createElement("button", { onClick: () => setIsAdding(true), className: "flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition-colors shadow-lg shadow-indigo-500/20" }, React.createElement(Plus, { size: 16 }), " Add Tool")
                ),
                
                // Add Modal
                isAdding && React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 p-6 rounded-2xl w-full max-w-sm border border-zinc-200 dark:border-zinc-800 shadow-2xl" },
                        React.createElement("h3", { className: "text-lg font-bold mb-4" }, "Add New Tool"),
                        React.createElement("input", { value: newName, onChange: e => setNewName(e.target.value), placeholder: "Tool Name (e.g. GitHub)", className: "w-full p-3 rounded-xl border mb-3 bg-zinc-50 dark:bg-zinc-950 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-zinc-900 dark:text-zinc-100" }),
                        React.createElement("input", { value: newUrl, onChange: e => setNewUrl(e.target.value), placeholder: "URL (https://...)", className: "w-full p-3 rounded-xl border mb-3 bg-zinc-50 dark:bg-zinc-950 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-zinc-900 dark:text-zinc-100" }),
                        React.createElement("select", { value: newCategory, onChange: e => setNewCategory(e.target.value), className: "w-full p-3 rounded-xl border mb-4 bg-zinc-50 dark:bg-zinc-950 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-zinc-900 dark:text-zinc-100" },
                            categories.map(c => React.createElement("option", { key: c, value: c }, c))
                        ),
                        React.createElement("div", { className: "flex gap-2" },
                            React.createElement("button", { onClick: () => setIsAdding(false), className: "flex-1 p-2 rounded-lg bg-zinc-200 dark:bg-zinc-800 font-medium" }, "Cancel"),
                            React.createElement("button", { onClick: handleAdd, className: "flex-1 p-2 rounded-lg bg-indigo-600 text-white font-medium hover:bg-indigo-700" }, "Add")
                        )
                    )
                ),

                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pb-20 overflow-y-auto pr-2 custom-scrollbar" },
                    Object.entries(groupedTools).map(([category, items]) => 
                        React.createElement(Card, { key: category, title: category, className: "gap-4" },
                            React.createElement("div", { className: "grid grid-cols-3 gap-3" },
                                items.map(tool => {
                                    const IconComponent = getIconForTool(tool.url, tool.name);
                                    return React.createElement(QuickLinkButton, { key: tool.id, href: tool.url, icon: IconComponent, label: tool.name });
                                })
                            )
                        )
                    )
                )
            );
        };

        // --- APP COMPONENT ---

        const App = () => {
            // UPDATED: Reordered tabs and added configuration for icons/labels
            const tabConfig = {
                dashboard: { label: "Dashboard", icon: Layout },
                goals2026: { label: "2026 Plan", icon: Flag },
                tasks: { label: "Daily Tasks", icon: ListTodo },
                worries: { label: "Worries", icon: ShieldAlert },
                focus: { label: "Focus Mode", icon: Timer },
                braindump: { label: "Brain Dump", icon: FileText },
                spirituality: { label: "Spirituality", icon: Flower2 },
                food: { label: "Food Plan", icon: Utensils },
                fitness: { label: "Fitness", icon: Dumbbell },
                tools: { label: "Tools", icon: Wrench }
            };

            const VALID_TABS = ['dashboard', 'goals2026', 'tasks', 'worries', 'focus', 'braindump', 'spirituality', 'food', 'fitness', 'tools'];
            
            const [activeTab, setActiveTab] = useState(() => localStorage.getItem('lifeos_active_tab') || 'dashboard');
            const [darkMode, setDarkMode] = useState(() => JSON.parse(localStorage.getItem('lifeos_dark_mode') || 'true'));
            
            // Session Persistence
            const [user, setUser] = useState(() => {
                try {
                    const stored = localStorage.getItem('lifeos_user_session');
                    return stored ? JSON.parse(stored) : null;
                } catch(e) { return null; }
            });
            
            const [isDataLoaded, setIsDataLoaded] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [showShareModal, setShowShareModal] = useState(false);
            const [showAuthModal, setShowAuthModal] = useState(false);
            const [authError, setAuthError] = useState(null);

            const [dumps, setDumps] = useState([]);
            const [spiritualNotes, setSpiritualNotes] = useState([]);
            const [meals, setMeals] = useState([]);
            const [worries, setWorries] = useState([]);
            const [tasks, setTasks] = useState([]);
            const [goalsProgress, setGoalsProgress] = useState({});
            const [goalsData, setGoalsData] = useState(DEFAULT_GOALS_DATA); 
            const [dashboardData, setDashboardData] = useState({ focus: "", habits: [] });
            const [tools, setTools] = useState(DEFAULT_TOOLS); // NEW STATE FOR TOOLS
            
            // GLOBAL FOCUS STATE
            const [activeSound, setActiveSound] = useState(null);
            const [isPlayingSound, setIsPlayingSound] = useState(false);
            const audioRef = useRef(new Audio());
            const [focusState, setFocusState] = useState({
                timeLeft: 25 * 60,
                isActive: false,
                initialTime: 25 * 60
            });

            // Focus Timer Logic
            useEffect(() => {
                let interval = null;
                if (focusState.isActive && focusState.timeLeft > 0) { interval = setInterval(() => { setFocusState(prev => ({ ...prev, timeLeft: prev.timeLeft - 1 })); }, 1000); } else if (focusState.timeLeft === 0) { setFocusState(prev => ({ ...prev, isActive: false })); }
                return () => clearInterval(interval);
            }, [focusState.isActive, focusState.timeLeft]);
            const handleTimerToggle = () => setFocusState(prev => ({ ...prev, isActive: !prev.isActive }));
            const handleTimerReset = (newTime) => { const time = newTime || focusState.initialTime; setFocusState({ timeLeft: time, isActive: false, initialTime: time }); };

            // Auth Listener
            useEffect(() => {
                if (isFirebaseConfigured) {
                    const unsubscribe = onAuthStateChanged(auth, (u) => {
                        if (u && (!user || !user.isLocal)) {
                             const newUser = { email: u.email || "Guest", uid: u.uid, isLocal: false, displayName: u.displayName || u.email.split('@')[0] };
                             setUser(newUser);
                             localStorage.setItem('lifeos_user_session', JSON.stringify(newUser));
                        }
                    });
                    return () => unsubscribe();
                }
            }, []);

            // Login Success
            const handleLoginSuccess = (userData) => {
                setUser(userData);
                localStorage.setItem('lifeos_user_session', JSON.stringify(userData));
                setIsDataLoaded(false); 
                setShowAuthModal(false);
            };

            const handleLogout = () => {
                if (isFirebaseConfigured && auth.currentUser) signOut(auth);
                setUser(null);
                localStorage.removeItem('lifeos_user_session');
                setIsDataLoaded(false);
                setDumps([]); setSpiritualNotes([]); setMeals([]); setTasks([]); setWorries([]); setGoalsData(DEFAULT_GOALS_DATA); setDashboardData({ focus: "", habits: [] }); setTools(DEFAULT_TOOLS);
            };

            // Data Sync
            useEffect(() => {
                if (!user) return;
                const userId = user.uid;
                const prefix = `lifeos_data_${userId}_`;
                try {
                    setDumps(JSON.parse(localStorage.getItem(`${prefix}dumps`) || '[]'));
                    setSpiritualNotes(JSON.parse(localStorage.getItem(`${prefix}spiritual_notes`) || '[]'));
                    setMeals(JSON.parse(localStorage.getItem(`${prefix}meals`) || '[]'));
                    setTasks(JSON.parse(localStorage.getItem(`${prefix}tasks`) || '[]'));
                    setWorries(JSON.parse(localStorage.getItem(`${prefix}worries`) || '[]'));
                    const loadedGoals = localStorage.getItem(`${prefix}goals_data_2026`);
                    setGoalsData(loadedGoals ? JSON.parse(loadedGoals) : DEFAULT_GOALS_DATA);
                    const loadedTools = localStorage.getItem(`${prefix}tools`); // Load Tools
                    setTools(loadedTools ? JSON.parse(loadedTools) : DEFAULT_TOOLS);
                    setDashboardData(JSON.parse(localStorage.getItem(`${prefix}dashboard`) || '{"focus":"", "habits":[]}'));
                    setIsDataLoaded(true);
                } catch(e) { console.error("Local Load Error", e); }
            }, [user]);

            // Save to LocalStorage
            useEffect(() => {
                if (user && isDataLoaded) {
                    const prefix = `lifeos_data_${user.uid}_`;
                    localStorage.setItem(`${prefix}dumps`, JSON.stringify(dumps));
                    localStorage.setItem(`${prefix}spiritual_notes`, JSON.stringify(spiritualNotes));
                    localStorage.setItem(`${prefix}meals`, JSON.stringify(meals));
                    localStorage.setItem(`${prefix}tasks`, JSON.stringify(tasks));
                    localStorage.setItem(`${prefix}worries`, JSON.stringify(worries));
                    localStorage.setItem(`${prefix}goals_data_2026`, JSON.stringify(goalsData));
                    localStorage.setItem(`${prefix}tools`, JSON.stringify(tools)); // Save Tools
                    localStorage.setItem(`${prefix}dashboard`, JSON.stringify(dashboardData));
                }
            }, [dumps, spiritualNotes, meals, tasks, worries, goalsData, dashboardData, tools, user, isDataLoaded]);

            // Handlers
            const handleAddDump = (text) => setDumps(prev => [{ id: Date.now().toString(), text, createdAt: new Date() }, ...prev]);
            const handleDeleteDump = (id) => setDumps(prev => prev.filter(d => d.id !== id));
            const handleAddSpiritualNote = (text) => setSpiritualNotes(prev => [{ id: Date.now().toString(), text, createdAt: new Date() }, ...prev]);
            const handleDeleteSpiritualNote = (id) => setSpiritualNotes(prev => prev.filter(n => n.id !== id));
            const handleAddWorry = (text) => setWorries(prev => [{ id: Date.now().toString(), text, createdAt: new Date() }, ...prev]);
            const handleDeleteWorry = (id) => setWorries(prev => prev.filter(w => w.id !== id));
            const handleAddTask = (task) => setTasks(prev => [{ id: Date.now().toString(), ...task, createdAt: new Date() }, ...prev]);
            const handleUpdateTask = (id, data) => setTasks(prev => prev.map(t => t.id === id ? { ...t, ...data } : t));
            const handleDeleteTask = (id) => setTasks(prev => prev.filter(t => t.id !== id));
            const handleUpdateDashboard = (data) => setDashboardData(data);
            const handleUpdateGoals = (newData) => setGoalsData(newData);
            const handleAddTool = (tool) => setTools(prev => [...prev, { id: Date.now().toString(), ...tool }]); // Add Tool Handler

            const handleUpdateMeal = (day, type, text) => {
                const existingMeal = meals.find(m => m.day === day && m.type === type);
                const docId = `${day}_${type}`;
                if (existingMeal) { 
                    setMeals(prev => prev.map(m => m.day === day && m.type === type ? { ...m, text, id: docId } : m));
                } else { 
                    const newMeal = { id: docId, day, type, text };
                    setMeals(prev => [...prev, newMeal]);
                }
            };

            const toggleSound = (sound) => {
                if (activeSound === sound.id && isPlayingSound) { audioRef.current.pause(); setIsPlayingSound(false); }
                else { audioRef.current.src = sound.url; audioRef.current.loop = true; audioRef.current.play(); setIsPlayingSound(true); setActiveSound(sound.id); }
            };

            useEffect(() => { if (darkMode) document.documentElement.classList.add('dark'); else document.documentElement.classList.remove('dark'); }, [darkMode]);
            useEffect(() => localStorage.setItem('lifeos_active_tab', activeTab), [activeTab]);

            if (!user) return React.createElement(LandingPage, { 
                onLoginSuccess: handleLoginSuccess, 
                onGuestLogin: handleLoginSuccess 
            });

            return React.createElement("div", { className: "min-h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 font-sans" },
                React.createElement("aside", { className: "fixed left-0 top-0 h-full w-64 border-r border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 p-6 hidden md:flex flex-col z-20" },
                    React.createElement("h1", { className: "text-2xl font-bold mb-8" }, "LifeOS"),
                    React.createElement("nav", { className: "space-y-2 flex-1" },
                        VALID_TABS.map(t => React.createElement(NavItem, { 
                            key: t, 
                            icon: tabConfig[t].icon, 
                            label: tabConfig[t].label, 
                            active: activeTab === t, 
                            onClick: () => setActiveTab(t) 
                        }))
                    ),
                    React.createElement("div", { className: "pt-6 border-t border-zinc-200 dark:border-zinc-800 space-y-2" },
                        // PROFILE CARD
                        user && React.createElement("div", { className: "flex items-center gap-3 px-3 py-2 mb-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800" },
                            React.createElement("div", { className: "w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 flex items-center justify-center font-bold text-xs shrink-0" }, 
                                React.createElement(User, { size: 16 })
                            ),
                            React.createElement("div", { className: "flex-1 overflow-hidden" },
                                React.createElement("p", { className: "text-[10px] font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider" }, "Signed in as"),
                                React.createElement("p", { className: "text-xs font-bold text-zinc-800 dark:text-zinc-200 truncate" }, user.displayName || user.email)
                            )
                        ),
                        React.createElement("button", { onClick: () => setDarkMode(!darkMode), className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 transition-colors" },
                            React.createElement(darkMode ? Sun : Moon, { size: 20 }),
                            React.createElement("span", { className: "font-medium" }, darkMode ? "Light Mode" : "Dark Mode")
                        ),
                        React.createElement("button", { onClick: handleLogout, className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors" },
                            React.createElement(LogOut, { size: 20 }),
                            React.createElement("span", { className: "font-medium" }, "Sign Out")
                        )
                    )
                ),
                mobileMenuOpen && React.createElement("div", { className: "fixed inset-0 z-50 md:hidden" },
                    React.createElement("div", { className: "absolute inset-0 bg-black/50 backdrop-blur-sm", onClick: () => setMobileMenuOpen(false) }),
                    React.createElement("aside", { className: "absolute left-0 top-0 h-full w-64 bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 p-6 flex flex-col shadow-2xl animate-in slide-in-from-left duration-300" }, 
                        React.createElement("h1", { className: "text-2xl font-bold mb-8" }, "LifeOS"),
                        React.createElement("nav", { className: "space-y-2 flex-1" }, 
                            VALID_TABS.map(t => React.createElement(NavItem, { 
                                key: t, 
                                icon: tabConfig[t].icon, 
                                label: tabConfig[t].label, 
                                active: activeTab === t, 
                                onClick: () => { setActiveTab(t); setMobileMenuOpen(false); } 
                            }))
                        ),
                        React.createElement("button", { onClick: handleLogout, className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500" }, React.createElement(LogOut, { size: 20 }), "Sign Out")
                    )
                ),
                React.createElement("main", { className: "md:ml-64 p-4 md:p-12 max-w-7xl mx-auto" },
                    showAuthModal && React.createElement(AuthModal, { onClose: () => setShowAuthModal(false), onLogin: handleLoginSuccess }),
                    activeTab === 'dashboard' && React.createElement(DashboardView, { 
                        onAddDump: handleAddDump, 
                        dashboardData, 
                        onUpdateDashboard: handleUpdateDashboard, 
                        onNavigate: setActiveTab,
                        timerState: focusState,
                        toggleTimer: handleTimerToggle,
                        resetTimer: handleTimerReset,
                        worries, // PASS WORRIES
                        meals,   // PASS MEALS
                        tasks,   // PASS TASKS
                        goalsData // PASS GOALS
                    }),
                    activeTab === 'goals2026' && React.createElement(Goals2026View, { goalsData, onUpdateGoals: handleUpdateGoals }),
                    activeTab === 'tasks' && React.createElement(TasksView, { tasks, onAddTask: handleAddTask, onUpdateTask: handleUpdateTask, onDeleteTask: handleDeleteTask }),
                    activeTab === 'worries' && React.createElement(WorriesView, { worries, onAddWorry: handleAddWorry, onDeleteWorry: handleDeleteWorry }),
                    activeTab === 'focus' && React.createElement(FocusView, { 
                        activeSound, 
                        isPlayingSound, 
                        toggleSound, 
                        focusState,
                        toggleTimer: handleTimerToggle, 
                        resetTimer: handleTimerReset 
                    }),
                    activeTab === 'braindump' && React.createElement(BrainDumpView, { dumps, onAddDump: handleAddDump, onDeleteDump: handleDeleteDump }),
                    activeTab === 'spirituality' && React.createElement(SpiritualityView, { notes: spiritualNotes, onAddNote: handleAddSpiritualNote, onDeleteNote: handleDeleteSpiritualNote }),
                    activeTab === 'fitness' && React.createElement(FitnessView),
                    activeTab === 'food' && React.createElement(FoodView, { meals, onUpdateMeal: handleUpdateMeal }),
                    activeTab === 'tools' && React.createElement(ToolsView, { tools, onAddTool: handleAddTool })
                )
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
